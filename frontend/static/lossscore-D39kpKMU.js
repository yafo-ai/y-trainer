import{l as R}from"./fselect-D-sWLC6j.js";import{_ as W,c as G,b as X}from"./index-CZdMHBuA.js";import{c as Y}from"./changeModel-B-K3bv9L.js";import{r as n,p as m,t as e,S as d,U as i,Q as q,J as Z,O as v,ai as x,F as M,aa as F,q as r,T as c,M as L,I as z}from"./vue-CQnFr7Mm.js";import"./element-DYg7Q49L.js";const ee={class:"page-index c-text-left"},le={class:"module-header"},se={class:"model"},te={class:"c-cardtitlebox"},oe={class:"titlebox nobg"},ae={class:"btnbox"},ne={key:0,style:{"min-height":"100px"},class:"contentbox"},ie={class:"compression-rounds",id:"compressionRounds"},re={class:"compression-round","data-round":"1"},ue={class:"round-header"},de={class:"round-title"},ce=["onClick"],pe={class:"params-grid"},me={class:"param-group"},ve={class:"param-group"},_e={class:"param-group"},fe={class:"param-group"},be={style:{"margin-top":"10px"},class:"btnbox tr"},ge={class:"c-gred c-rowbox"},ye={class:"c-cardtitlebox"},xe={class:"titlebox"},ke={class:"contentbox"},he={class:"c-cardtitlebox"},Ve={class:"titlebox"},we={class:"contentbox"},Ce={class:"c-cardtitlebox c-rowbox"},Te={style:{background:"rgb(248, 249, 250)",padding:"0",margin:"1.5rem",border:"1px solid #e5e7eb","border-radius":"0.5rem"},class:"contentbox"},Ie={key:0,class:"lbox-content outputcontent"},Ue=["innerHTML"],Me={class:"scroetip"},Fe={key:1,class:"empty-state"},Le={class:"c-cardtitlebox c-rowbox"},$e={class:"contentbox"},Se={class:"compression-round-result"},qe={class:"round-result-header"},ze={class:"round-result-title"},Ae={style:{display:"flex","align-items":"center",gap:"1rem"}},Be={class:"compression-stats"},De={style:{"margin-bottom":"0.5rem","font-size":"0.75rem",color:"#6b7280"}},He=["innerHTML"],Ne={key:1,class:"empty-state"},Pe={__name:"lossscore",setup(Ee){const u=n({input:"",question:"",kernel_num:5,topk:150,min_scroe:0,score_type:1}),p=n(null),b=n([{kernel_num:5,topk:150,min_scroe:0,score_type:1}]),A=n(0),B=async()=>{if(u.value.input==="")return _this.$message("请输入数据");k.value=0,g.value=[],$(),console.log(g.value)},g=n([]),k=n(0),$=async o=>{u.value.model_name=w.value||void 0,k.value<b.value.length&&(u.value={...u.value,...b.value[k.value]});let l=R.cloneDeep(u.value);o&&(l.input=o);const t=await X(l);t&&t.data&&(p.value=t.data,p.value.compress_text_old=p.value.compress_text,p.value.compress_text=p.value.compress_text.replace(/\n/g,"<br />"),p.value.params=l,p.value.round=k.value,g.value.push(p.value),k.value++,k.value<b.value.length?$(p.value.compress_text_old):A.value=g.value.length-1),D()},T=n([]),I=n(1),S=n(0),D=(o,l)=>{P.value="";let t=p.value.attention_scores||[];I.value=Math.max(...t),S.value=Math.min(...t);let h=[];p.value.input_tokens.forEach((V,C)=>{let y="极低",f=t[C]/I.value*100;f>=80?y="极高":f>=60?y="高":f>=40?y="中等":f>=20&&(y="低"),h.push({text:V&&V.replace(/\n/g,"\\n <br />"),value:t[C],maxVal:I.value,minVal:S.value,scorePercentage:f,attentionLevel:y,color:H(t[C],I.value)})}),T.value=h,console.log(T.value)},H=(o,l)=>`rgba(2, 169, 169,${o/l})`,N=()=>{u.value.input="",u.value.question=""},P=n(""),w=n("./big-models/"),E=n(!1);localStorage.getItem("cur_model")?w.value=localStorage.getItem("cur_model"):G().then(o=>{o&&o.data&&o.data.model_name&&(localStorage.setItem("cur_model",o.data.model_name),w.value=o.data.model_name)});const K=o=>{w.value=o.val,E.value=!1},U=n(!0),O=n(`人工智能（Artificial Intelligence，简称AI）是一门研究如何使计算机模拟人类智能的学科。它包括多个分支，如机器学习、深度学习、自然语言处理、计算机视觉等。

机器学习是AI的核心技术，它使计算机能够从数据中学习并提高性能，而无需明确编程。深度学习是机器学习的一个子集，它使用神经网络来模拟人脑的工作方式。

当前，AI技术已广泛应用于各个领域，如医疗诊断、金融分析、自动驾驶、智能客服等。尽管AI取得了显著进步，但它仍面临诸多挑战，如数据隐私、算法偏见、安全性等问题。

未来，随着技术的不断发展，AI有望在更多领域发挥重要作用，为人类社会带来更多便利和创新。`),j=n("人工智能"),J=o=>{window._this.$copy(o)};return(o,l)=>{const t=x("el-button"),h=x("el-input-number"),V=x("el-option"),C=x("el-select"),y=x("el-scrollbar"),f=x("el-input"),Q=x("el-popover");return r(),m("div",ee,[e("div",le,[l[9]||(l[9]=e("h1",{class:"module-title"},[e("i",{class:"fas fa-compress"}),d(" 内容压缩 ")],-1)),e("div",se,[i(Y,{val:w.value,onSubfn:K},null,8,["val"])])]),e("div",te,[e("div",oe,[e("span",{onClick:l[0]||(l[0]=s=>U.value=!U.value),class:Z(["js-opentitle",{on:U.value}])},l[10]||(l[10]=[e("i",{class:"fas fa-cog"},null,-1),d(" 压缩参数配置"),e("i",{class:"fas fa-chevron-up"},null,-1)]),2),e("div",ae,[i(t,{onClick:N,tabindex:"-1",type:"info"},{default:v(()=>l[11]||(l[11]=[e("i",{class:"fas fa-redo"},null,-1),d(" 重置")])),_:1}),i(t,{onClick:B,tabindex:"-1",type:"success"},{default:v(()=>l[12]||(l[12]=[e("i",{class:"fas fa-play"},null,-1),d(" 开始压缩")])),_:1})])]),U.value?(r(),m("div",ne,[i(y,{"max-height":"300"},{default:v(()=>[e("div",ie,[(r(!0),m(M,null,F(b.value,(s,_)=>(r(),m("div",re,[e("div",ue,[e("div",de,"第 "+c(_+1)+" 次压缩",1),b.value.length>1?(r(),m("button",{key:0,class:"remove-round-btn",onClick:a=>b.value.splice(_,1),style:{display:"block"}},l[13]||(l[13]=[e("i",{class:"fas fa-times"},null,-1),d(" 移除 ")]),8,ce)):q("",!0)]),e("div",pe,[e("div",me,[l[14]||(l[14]=e("label",{class:"param-label"},"卷积核大小",-1)),i(h,{onFocus:l[1]||(l[1]=a=>a.target.select()),style:{width:"100%"},modelValue:s.kernel_num,"onUpdate:modelValue":a=>s.kernel_num=a,placeholder:"请填写卷积核",min:0,"controls-position":"right"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",ve,[l[15]||(l[15]=e("label",{class:"param-label"},"Top-K 值",-1)),i(h,{onFocus:l[2]||(l[2]=a=>a.target.select()),style:{width:"100%"},modelValue:s.topk,"onUpdate:modelValue":a=>s.topk=a,placeholder:"请填写topk",min:0,"controls-position":"right"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",_e,[l[16]||(l[16]=e("label",{class:"param-label"},"分数类型",-1)),i(C,{modelValue:s.score_type,"onUpdate:modelValue":a=>s.score_type=a,placeholder:"请选择分数类型",style:{width:"100%"}},{default:v(()=>[(r(),L(V,{key:1,label:"原始分数",value:1})),(r(),L(V,{key:2,label:"分数加权放大",value:2}))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",fe,[l[17]||(l[17]=e("label",{class:"param-label"},"最小分数阈值",-1)),i(h,{onFocus:l[3]||(l[3]=a=>a.target.select()),style:{width:"100%"},modelValue:s.min_scroe,"onUpdate:modelValue":a=>s.min_scroe=a,placeholder:"请填写min_score",min:0,"controls-position":"right"},null,8,["modelValue","onUpdate:modelValue"])])])]))),256))])]),_:1}),e("div",be,[i(t,{onClick:l[4]||(l[4]=s=>b.value.push({kernel_num:5,topk:150,min_scroe:0,score_type:1})),type:"success",plain:""},{default:v(()=>l[18]||(l[18]=[e("i",{class:"fas fa-plus"},null,-1),d(" 添加压缩轮次")])),_:1})])])):q("",!0)]),e("div",ge,[e("div",ye,[e("div",xe,[l[20]||(l[20]=e("span",null,[e("i",{class:"fas fa-edit"}),d(" 输入内容")],-1)),i(t,{onClick:l[5]||(l[5]=s=>u.value.input=O.value),size:"small",type:"info"},{default:v(()=>l[19]||(l[19]=[e("i",{class:"fas fa-file-import"},null,-1),d(" 示例")])),_:1})]),e("div",ke,[i(f,{modelValue:u.value.input,"onUpdate:modelValue":l[6]||(l[6]=s=>u.value.input=s),style:{width:"100%"},rows:14,type:"textarea",placeholder:`请输入需要压缩的文本内容...\r
\r
支持中文和英文文本，建议输入较长的文本以获得更好的压缩效果。`},null,8,["modelValue"])])]),e("div",he,[e("div",Ve,[l[22]||(l[22]=e("span",null,[e("i",{class:"fas fa-question-circle"}),d(" 压缩指令")],-1)),i(t,{onClick:l[7]||(l[7]=s=>u.value.question=j.value),size:"small",type:"info"},{default:v(()=>l[21]||(l[21]=[e("i",{class:"fas fa-file-import"},null,-1),d(" 示例")])),_:1})]),e("div",we,[i(f,{modelValue:u.value.question,"onUpdate:modelValue":l[8]||(l[8]=s=>u.value.question=s),style:{width:"100%"},rows:14,type:"textarea",placeholder:`请输入压缩指令或问题...\r
\r
例如：请将上述内容压缩为100字以内的摘要，保留核心信息。`},null,8,["modelValue"])])])]),e("div",Ce,[l[24]||(l[24]=e("div",{class:"titlebox"},[e("span",null,[e("i",{class:"fas fa-chart-bar"}),d(" 原始内容Token分析")])],-1)),e("div",Te,[T.value.length>0?(r(),m("div",Ie,[(r(!0),m(M,null,F(T.value,(s,_)=>(r(),L(Q,{key:_,"show-after":500,placement:"top","popper-style":{width:"auto",padding:"10px",minWidth:"80px"},trigger:"hover"},{reference:v(()=>[e("span",{class:"item",style:z("background-color:"+s.color),innerHTML:s.text},null,12,Ue)]),default:v(()=>[e("div",Me,[d(" 原始分数: "+c(s.value.toFixed(4))+" ("+c(s.scorePercentage.toFixed(2))+"%) | 范围: "+c(s.minVal.toFixed(4))+" - "+c(s.maxVal.toFixed(4))+" | ",1),e("span",{style:z("background: "+s.color+";display: inline-block;border-radius: 20px;padding: 5px 10px;"),round:"",size:"mini"},c(s.attentionLevel),5)])]),_:2},1024))),128))])):(r(),m("div",Fe,l[23]||(l[23]=[e("i",{class:"fas fa-file-text"},null,-1),e("p",null,"原始内容的Token分析将在这里显示",-1),e("small",{style:{"margin-top":"0.5rem",display:"block"}},"输入内容后开始压缩查看分析结果",-1)])))])]),e("div",Le,[l[27]||(l[27]=e("div",{class:"titlebox"},[e("span",null,[e("i",{class:"fas fa-compress-alt"}),d(" 压缩结果")])],-1)),e("div",$e,[g.value.length>0?(r(!0),m(M,{key:0},F(g.value,(s,_)=>(r(),m("div",Se,[e("div",qe,[e("div",ze,"第 "+c(_+1)+" 轮压缩结果",1),e("div",Ae,[e("div",Be,[e("span",null,"Token数: "+c(s.input_tokens.length),1),e("span",null,"移除: "+c(_>0?g.value[_-1].input_tokens.length-s.input_tokens.length:0),1)]),i(t,{onClick:a=>J(s.compress_text),type:"info",title:"复制第"+(_+1)+"轮结果",size:"small"},{default:v(()=>l[25]||(l[25]=[e("i",{class:"fas fa-copy"},null,-1)])),_:2},1032,["onClick","title"])])]),e("div",De," 参数: 卷积核="+c(s.params.kernel_num)+", Top-K="+c(s.params.topk)+", 分数类型="+c(s.params.score_type==1?"原始分数":"分数加权放大")+", 最小分数="+c(s.params.min_scroe),1),e("div",{innerHTML:s.compress_text,class:"round-result-content"},null,8,He)]))),256)):(r(),m("div",Ne,l[26]||(l[26]=[e("i",{class:"fas fa-compress-alt"},null,-1),e("p",null,"压缩结果将在这里显示",-1),e("small",{style:{"margin-top":"0.5rem",display:"block"}},"配置参数后开始压缩",-1)])))])]),l[28]||(l[28]=e("br",null,null,-1))])}}},Re=W(Pe,[["__scopeId","data-v-807e7d4a"]]);export{Re as default};
