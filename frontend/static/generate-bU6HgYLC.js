import{l as q}from"./lodash-CNPm4k7W.js";import{_ as B,g as E}from"./index-DvaJYu1w.js";import{c as H}from"./changeModel-DHxmR1HF.js";import{r as v,p as f,t,S as u,U as n,J as A,O as c,ai as k,P as T,aq as P,q as _,F as j,aa as O,T as G}from"./vue-CQnFr7Mm.js";import"./element-DYg7Q49L.js";import"./fselect-B0rI_y1k.js";const K={class:"page-index c-text-left"},Q={class:"module-header"},W={class:"model"},X={class:"c-cardtitlebox"},Y={class:"titlebox nobg"},Z={class:"btnbox"},ee={style:{"min-height":"60px"},class:"contentbox"},te={class:"compression-rounds",id:"compressionRounds"},se={class:"compression-round","data-round":"1"},le={class:"params-grid"},ae={class:"param-group"},oe={class:"param-group"},ne={class:"param-group"},ie={class:"param-group"},de={class:"c-gred c-rowbox"},re={class:"c-cardtitlebox"},pe={class:"titlebox"},ue={class:"contentbox"},me={class:"c-cardtitlebox"},ce={class:"contentbox"},ve={class:"c-gred c-rowbox"},fe={style:{border:"none"},class:"c-cardtitlebox"},_e={class:"titlebox"},ge={class:"btnbox"},be={style:{"min-height":"650px"},"element-loading-text":"样本生成中...",class:"contentbox"},ye={key:0,class:"lbox-content outputcontent"},xe={class:"sample-header"},ke={class:"sample-id"},Ve={class:"sample-actions"},$e=["innerHTML"],we={key:1,class:"empty-state"},he={style:{border:"none"},class:"c-cardtitlebox"},Se={style:{"min-height":"650px"},"element-loading-text":"样本生成中...",class:"contentbox"},Ce={key:0,class:"lbox-content outputcontent"},Ue={class:"advantage-sample-item"},Te={class:"advantage-sample-header"},je={class:"sample-actions"},Oe=["innerHTML"],Le={key:1,class:"empty-state"},De={__name:"generate",setup(Ie){const r=v({input:"",prompt_temp:`# 你是一个样本挑选助手，我会提供任务背景与在这个任务背景下生成的多组样本，你需要从这些样本中挑选出针对任务背景最有优势的一个样本，同时对选中的优势样本进行错误修复、强化放大优势。

## 任务背景 

{input} 

## 多组样本 

{samples} 

数据最终结果，注意不要说明解释性内容：`,generate_num:5,top_k:0,temperature:.1,top_p:1});localStorage.getItem("generate_samples")&&(r.value.prompt_temp=localStorage.getItem("generate_samples"));const d=v(null),V=v([{generate_num:5,top_k:0,temperature:.1,top_p:1}]);v(0);const S=async m=>{if(r.value.input==="")return _this.$message("请输入数据");$.value=0,L.value=[],D(m)},L=v([]),$=v(0),x=v(!1),D=async m=>{r.value.model_name=w.value||void 0,$.value<V.value.length&&(r.value={...r.value,...V.value[$.value]}),localStorage.setItem("generate_samples",r.value.prompt_temp);let e=q.cloneDeep(r.value);x.value=!0,E(e,m).then(a=>{a&&a.data&&(d.value=a.data),x.value=!1}).catch(a=>{x.value=!1})},I=()=>{r.value.input="",r.value.prompt_temp=""},w=v("./big-models/"),M=v(!1),N=()=>{if(!(d.value&&d.value.samples&&d.value.samples.length>0)){_this.$message("没有可导出的结果","error");return}const e=[...d.value.samples.map((l,y)=>({id:y+1,content:l,type:"text",quality:"standard"}))],a="text";let i="",o="",p="";switch(a){case"json":i=JSON.stringify(e,null,2),o=`samples_${new Date().toISOString().split("T")[0]}.json`,p="application/json";break;case"csv":i=z(e),o=`samples_${new Date().toISOString().split("T")[0]}.csv`,p="text/csv";break;default:i=e.map(l=>{let y="";return l.type==="conversation"?y=l.content.map(U=>`${U.speaker}: ${U.message}`).join(`
`):l.type==="data"?y=JSON.stringify(l.content,null,2):y=l.content,`=== ${l.id} ===
${y}`}).join(`

`),o=`samples_${new Date().toISOString().split("T")[0]}.txt`,p="text/plain"}const b=new Blob([i],{type:`${p};charset=utf-8`}),s=URL.createObjectURL(b),g=document.createElement("a");g.href=s,g.download=o,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(s)},z=m=>{const e=["ID","Type","Content","Metadata"],a=m.map(i=>[i.id,i.type,JSON.stringify(i.content).replace(/"/g,'""'),JSON.stringify(i.metadata).replace(/"/g,'""')]);return[e,...a].map(i=>i.map(o=>`"${o}"`).join(",")).join(`
`)},R=m=>{if(!(d.value&&d.value.samples&&d.value.samples.length>0)){_this.$message("没有可复制的结果","error");return}const i=[...d.value.samples.map((o,p)=>({id:p+1,content:o,type:"text",quality:"standard"}))].map(o=>{let p="";return o.type==="conversation"?p=o.content.map(b=>`${b.speaker}: ${b.message}`).join(`
`):o.type==="data"?p=JSON.stringify(o.content,null,2):p=o.content,`=== 样本 ${o.id} ===
${p}`}).join(`

`);window._this.$copy(i)},F=m=>{w.value=m.val,M.value=!1},J=v(`我们需要设计一个更好的用户界面。界面应该简洁、直观且易于使用。
用户界面的颜色应该协调，不要太花哨。
所有按钮和链接应该清晰可见，不要隐藏在页面角落。
导航菜单应该逻辑清晰，用户能够轻松找到所需功能。
响应式设计很重要，确保在移动设备上也能良好显示。
用户反馈是改进界面的重要依据，我们应该收集并分析用户行为数据。
简化流程，减少用户完成任务所需的点击次数。
提供清晰的错误提示，帮助用户理解并解决问题。
界面加载速度要快，不要让用户等待太久。
最后，确保界面符合品牌形象和设计规范。`),h=v(!0),C=m=>{window._this.$copy(m)};return(m,e)=>{const a=k("el-button"),i=k("el-input-number"),o=k("el-scrollbar"),p=k("el-input"),b=P("loading");return _(),f("div",K,[t("div",Q,[e[13]||(e[13]=t("h1",{class:"module-title"},[t("i",{class:"fas fa-magic"}),u(" 样本生成 ")],-1)),t("div",W,[n(H,{val:w.value,onSubfn:F},null,8,["val"])])]),t("div",X,[t("div",Y,[t("span",{onClick:e[0]||(e[0]=s=>h.value=!h.value),class:A(["js-opentitle",{on:h.value}])},e[14]||(e[14]=[t("i",{class:"fas fa-sliders-h"},null,-1),u(" 参数调整")]),2),t("div",Z,[n(a,{onClick:I,tabindex:"-1",type:"info"},{default:c(()=>e[15]||(e[15]=[t("i",{class:"fas fa-redo"},null,-1),u(" 重置")])),_:1}),n(a,{onClick:e[1]||(e[1]=s=>S(1)),tabindex:"-1",type:"info"},{default:c(()=>e[16]||(e[16]=[t("i",{class:"fas fa-random"},null,-1),u(" 动态熵温度生成")])),_:1}),n(a,{onClick:S,tabindex:"-1",type:"warning"},{default:c(()=>e[17]||(e[17]=[t("i",{class:"fas fa-play"},null,-1),u(" 生成样本")])),_:1})])]),t("div",ee,[n(o,{"max-height":"300"},{default:c(()=>[t("div",te,[(_(!0),f(j,null,O(V.value,(s,g)=>(_(),f("div",se,[t("div",le,[t("div",ae,[e[18]||(e[18]=t("label",{class:"param-label"},"生成样本数",-1)),n(i,{onFocus:e[2]||(e[2]=l=>l.target.select()),style:{width:"100%"},modelValue:s.generate_num,"onUpdate:modelValue":l=>s.generate_num=l,placeholder:"请填写卷积核",min:1,max:10,controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),t("div",oe,[e[19]||(e[19]=t("label",{class:"param-label"},"模型采样温度",-1)),n(i,{onFocus:e[3]||(e[3]=l=>l.target.select()),style:{width:"100%"},modelValue:s.temperature,"onUpdate:modelValue":l=>s.temperature=l,placeholder:"请填写min_score",min:0,max:1,controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),t("div",ne,[e[20]||(e[20]=t("label",{class:"param-label"},"模型随机采样 top_k",-1)),n(i,{onFocus:e[4]||(e[4]=l=>l.target.select()),style:{width:"100%"},modelValue:s.top_k,"onUpdate:modelValue":l=>s.top_k=l,placeholder:"请填写topk",min:0,max:100,controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),t("div",ie,[e[21]||(e[21]=t("label",{class:"param-label"},"模型核取样 top_p",-1)),n(i,{onFocus:e[5]||(e[5]=l=>l.target.select()),style:{width:"100%"},modelValue:s.top_p,"onUpdate:modelValue":l=>s.top_p=l,placeholder:"请填写topk",min:0,max:1,controls:!1},null,8,["modelValue","onUpdate:modelValue"])])])]))),256))])]),_:1})])]),t("div",de,[t("div",re,[t("div",pe,[e[23]||(e[23]=t("span",null,[t("i",{class:"fas fa-file-text"}),u(" 训练语料输入")],-1)),n(a,{onClick:e[6]||(e[6]=s=>r.value.input=J.value),size:"small",type:"info"},{default:c(()=>e[22]||(e[22]=[t("i",{class:"fas fa-file-import"},null,-1),u(" 示例")])),_:1})]),t("div",ue,[n(p,{modelValue:r.value.input,"onUpdate:modelValue":e[7]||(e[7]=s=>r.value.input=s),style:{width:"100%"},rows:14,type:"textarea",placeholder:""},null,8,["modelValue"])])]),t("div",me,[e[24]||(e[24]=t("div",{class:"titlebox"},[t("span",null,[t("i",{class:"fas fa-edit"}),u(" 自我评价修复样本提示词")])],-1)),t("div",ce,[n(p,{modelValue:r.value.prompt_temp,"onUpdate:modelValue":e[8]||(e[8]=s=>r.value.prompt_temp=s),style:{width:"100%"},rows:14,type:"textarea",placeholder:""},null,8,["modelValue"])])])]),t("div",ve,[t("div",fe,[t("div",_e,[e[28]||(e[28]=t("span",null,[t("i",{class:"fas fa-list"}),u(" 样本输出")],-1)),t("div",ge,[n(a,{onClick:e[9]||(e[9]=s=>{d.value=null}),size:"small",type:"info"},{default:c(()=>e[25]||(e[25]=[t("i",{class:"fas fa-trash"},null,-1),u(" 清空")])),_:1}),n(a,{onClick:e[10]||(e[10]=s=>N()),size:"small",type:"info"},{default:c(()=>e[26]||(e[26]=[t("i",{class:"fas fa-download"},null,-1),u(" 导出")])),_:1}),n(a,{onClick:e[11]||(e[11]=s=>R()),size:"small",type:"info"},{default:c(()=>e[27]||(e[27]=[t("i",{class:"fas fa-copy"},null,-1),u(" 全部复制")])),_:1})])]),T((_(),f("div",be,[n(o,{"max-height":"640"},{default:c(()=>[d.value&&d.value.samples?(_(),f("div",ye,[(_(!0),f(j,null,O(d.value.samples,(s,g)=>(_(),f("div",{key:g,class:"sample-item"},[t("div",xe,[t("div",ke,"样本 "+G(g+1),1),t("div",Ve,[n(a,{onClick:l=>C(s),size:"small",type:"info"},{default:c(()=>e[29]||(e[29]=[t("i",{class:"fas fa-copy"},null,-1)])),_:2},1032,["onClick"])])]),t("div",{innerHTML:s,class:"sample-content"},null,8,$e)]))),128))])):(_(),f("div",we,e[30]||(e[30]=[t("i",{class:"fas fa-file-text"},null,-1),t("p",null,'点击"生成样本"按钮开始生成',-1)])))]),_:1})])),[[b,x.value]])]),t("div",he,[e[34]||(e[34]=t("div",{style:{"border-bottom":"1px solid rgba(245, 158, 11, 0.2)",background:"linear-gradient(135deg, rgba(255, 251, 235, 0.8) 0%, rgba(254, 243, 199, 0.8) 100%)",color:"#92400e"},class:"titlebox"},[t("span",null,[t("i",{class:"fas fa-star"}),u(" 优势样本")])],-1)),T((_(),f("div",Se,[n(o,{"max-height":"640"},{default:c(()=>[d.value&&d.value.advantage_sample?(_(),f("div",Ce,[t("div",Ue,[t("div",Te,[e[32]||(e[32]=t("div",{class:"advantage-sample-title"},[t("i",{class:"fas fa-star"}),u(" 优势样本 ")],-1)),t("div",je,[n(a,{onClick:e[12]||(e[12]=s=>C(d.value.advantage_sample)),size:"small",type:"info"},{default:c(()=>e[31]||(e[31]=[t("i",{class:"fas fa-copy"},null,-1)])),_:1})])]),t("div",{innerHTML:d.value.advantage_sample,class:"advantage-sample-content"},null,8,Oe)])])):(_(),f("div",Le,e[33]||(e[33]=[t("i",{class:"fas fa-trophy"},null,-1),t("p",null,"优势样本将在生成后显示",-1)])))]),_:1})])),[[b,x.value]])])]),e[35]||(e[35]=t("br",null,null,-1))])}}},qe=B(De,[["__scopeId","data-v-f0a51264"]]);export{qe as default};
