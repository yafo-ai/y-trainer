import"./fselect-B6x0UeyF.js";import{_ as J,c as O,d as I}from"./index-CARMBqMV.js";import{c as U}from"./changeModel-CIi0xNCm.js";import{r as i,w as B,p as d,t as l,S as c,U as r,O as _,ai as m,Q as M,J as y,T as q,P as z,aq as T,q as v}from"./vue-CQnFr7Mm.js";import"./element-DYg7Q49L.js";const $={class:"page-index c-text-left"},E={class:"module-header"},F={class:"model"},P={class:"c-cardtitlebox c-rowbox"},Q={class:"titlebox"},G={class:"rbtns"},H={class:"inpbox"},K={class:"item"},R={class:"item"},W={class:"contentbox"},X={key:0,class:"fas fa-check-circle"},Y={key:1,class:"fas fa-exclamation-circle"},Z={class:"c-cardtitlebox c-rowbox"},ee={"element-loading-text":"加载中...",class:"contentbox"},le={key:0,class:"curoutbox"},se={key:1,class:"empty-state"},te={__name:"clusters",setup(ae){const a=i({data:[],is_attent:!0,score_threshold:1500}),x=i(null),o=i(""),n=i(""),t=i(!1),p=i(!1),A=async s=>{if(!g())return!1;p.value=!0,a.value.data=JSON.parse(o.value),I(a.value).then(e=>{e.code==200&&(x.value=e.data),p.value=!1}).catch(e=>{p.value=!1})};B(()=>o.value,s=>{g()});const h=()=>{o.value="",a.value.score_threshold=1500,a.value.is_attent=!0},g=()=>{if(console.log(o.value),!o.value)return n.value="请先输入数据",t.value=!1,!1;try{let s=JSON.parse(o.value);return Array.isArray(s)?s.length>0?(a.value.data=s,n.value="有效的JSON数组，包含"+s.length+"个元素",t.value=!0,!0):(n.value="数组不能为空，至少需要一个元素",t.value=!1,!1):(n.value='输入必须是数组格式，例如：["文本1", "文本2"]',t.value=!1,!1)}catch{return n.value="JSON格式错误：存在语法错误，请检查引号、逗号是否正确",t.value=!1,!1}},f=i("./big-models/"),w=i(!1);localStorage.getItem("cur_model")?f.value=localStorage.getItem("cur_model"):O().then(s=>{s&&s.data&&s.data.model_name&&(localStorage.setItem("cur_model",s.data.model_name),f.value=s.data.model_name)});const V=s=>{f.value=s.val,w.value=!1},k=i(JSON.stringify(["用户正在浏览：爱普生L3256三合一彩色喷墨打印机（A4）[产品id:5A2655]用户：连续能打印多长时间","用户正在浏览：爱普生L3256三合一彩色喷墨机（A4）[产品id:5A2655]用户：3253呢","用户正在浏览：爱普生L11058墨仓式彩色喷墨打印机（A3）[产品id:5A2679]用户：这个能自动打双面吗？","用户正在浏览：爱普生L11058墨仓式彩色喷墨打印机（A3）[产品id:5A2679]用户：自动双面吗？","用户正在浏览：爱普生L3256三合一彩色喷墨打印机（A4）[产品id:5A2655]用户：连续打印？","用户正在浏览：爱普生L3256三合一彩色喷墨打印机（A4）[产品id:5A2655]用户：用啥耗材","用户正在浏览：爱普生L3256三合一彩色喷墨打印机（A4）[产品id:5A2655]用户：使用什么耗材","用户正在浏览：爱普生L3256三合一彩色喷墨打印机（A4）[产品id:5A2655]用户：适用什么耗材？","用户正在浏览：爱普生L3256三合一彩色喷墨打印机（A4）[产品id:5A2655]用户：耗材型号"],null,2));return(s,e)=>{const b=m("el-button"),S=m("el-switch"),L=m("el-input-number"),N=m("el-input"),D=m("json-viewer"),C=m("el-scrollbar"),j=T("loading");return v(),d("div",$,[l("div",E,[e[5]||(e[5]=l("h1",{class:"module-title"},[l("i",{class:"fas fa-project-diagram"}),c(" 聚类筛选 ")],-1)),l("div",F,[r(U,{val:f.value,onSubfn:V},null,8,["val"])])]),l("div",P,[l("div",Q,[l("span",null,[e[7]||(e[7]=l("i",{class:"fas fa-database"},null,-1)),e[8]||(e[8]=c(" 目标数据输入 ")),r(b,{style:{"margin-left":"10px"},onClick:e[0]||(e[0]=u=>o.value=k.value),size:"small",type:"info"},{default:_(()=>e[6]||(e[6]=[l("i",{class:"fas fa-file-import"},null,-1),c(" 示例")])),_:1})]),l("div",G,[l("div",H,[l("div",K,[e[9]||(e[9]=l("span",{class:"label"},"是否开启注意力特征提取:",-1)),r(S,{modelValue:a.value.is_attent,"onUpdate:modelValue":e[1]||(e[1]=u=>a.value.is_attent=u)},null,8,["modelValue"])]),l("div",R,[e[10]||(e[10]=l("span",{class:"label"},"过滤分数:",-1)),r(L,{onFocus:e[2]||(e[2]=u=>u.target.select()),style:{width:"80px",display:"inline-block"},modelValue:a.value.score_threshold,"onUpdate:modelValue":e[3]||(e[3]=u=>a.value.score_threshold=u),placeholder:"请填写topk",min:0,controls:!1},null,8,["modelValue"])])]),r(b,{onClick:h,tabindex:"-1",style:{float:"right"},type:"info"},{default:_(()=>e[11]||(e[11]=[c("重置")])),_:1}),r(b,{onClick:A,tabindex:"-1",style:{float:"right"},type:"primary"},{default:_(()=>e[12]||(e[12]=[l("i",{class:"fas fa-project-diagram"},null,-1),c(" 聚类")])),_:1})])]),l("div",W,[r(N,{class:y(["c-textarea",{"c-danger":!t.value&&n.value,"c-success":t.value&&n.value}]),modelValue:o.value,"onUpdate:modelValue":e[4]||(e[4]=u=>o.value=u),style:{width:"100%"},rows:14,type:"textarea",placeholder:""},null,8,["class","modelValue"]),n.value?(v(),d("div",{key:0,class:y(["validation-message",{error:!t.value,success:t.value}])},[t.value?(v(),d("i",X)):(v(),d("i",Y)),c(q(n.value),1)],2)):M("",!0)])]),l("div",Z,[e[14]||(e[14]=l("div",{class:"titlebox"},[l("span",null,[l("i",{class:"fas fa-compress-alt"}),c(" 聚类结果")])],-1)),z((v(),d("div",ee,[r(C,{"max-height":"600"},{default:_(()=>[x.value?(v(),d("div",le,[r(D,{"show-array-index":!0,sort:"","expand-depth":3,value:x.value},null,8,["value"])])):(v(),d("div",se,e[13]||(e[13]=[l("i",{class:"fas fa-project-diagram"},null,-1),l("p",null,'请输入数据并点击"聚类"按钮',-1)])))]),_:1})])),[[j,p.value]])]),e[15]||(e[15]=l("br",null,null,-1))])}}},ce=J(te,[["__scopeId","data-v-bc5da839"]]);export{ce as default};
