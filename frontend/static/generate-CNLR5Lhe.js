import{l as q}from"./fselect-B6x0UeyF.js";import{_ as B,c as E,g as H}from"./index-CARMBqMV.js";import{c as A}from"./changeModel-CIi0xNCm.js";import{r as m,p as f,t,S as c,U as n,J as P,O as v,ai as w,P as T,aq as G,q as _,F as j,aa as O,T as K}from"./vue-CQnFr7Mm.js";import"./element-DYg7Q49L.js";const Q={class:"page-index c-text-left"},W={class:"module-header"},X={class:"model"},Y={class:"c-cardtitlebox"},Z={class:"titlebox nobg"},ee={class:"btnbox"},te={style:{"min-height":"60px"},class:"contentbox"},le={class:"compression-rounds",id:"compressionRounds"},se={class:"compression-round","data-round":"1"},ae={class:"params-grid"},oe={class:"param-group"},ne={class:"param-group"},ie={class:"param-group"},de={class:"param-group"},re={class:"c-gred c-rowbox"},pe={class:"c-cardtitlebox"},ue={class:"titlebox"},me={class:"contentbox"},ce={class:"c-cardtitlebox"},ve={class:"contentbox"},fe={class:"c-gred c-rowbox"},_e={style:{border:"none"},class:"c-cardtitlebox"},ge={class:"titlebox"},be={class:"btnbox"},ye={style:{"min-height":"650px"},"element-loading-text":"样本生成中...",class:"contentbox"},xe={key:0,class:"lbox-content outputcontent"},ke={class:"sample-header"},we={class:"sample-id"},Ve={class:"sample-actions"},$e=["innerHTML"],Se={key:1,class:"empty-state"},he={style:{border:"none"},class:"c-cardtitlebox"},Ce={style:{"min-height":"650px"},"element-loading-text":"样本生成中...",class:"contentbox"},Ue={key:0,class:"lbox-content outputcontent"},Te={class:"advantage-sample-item"},je={class:"advantage-sample-header"},Oe={class:"sample-actions"},Ie=["innerHTML"],Le={key:1,class:"empty-state"},De={__name:"generate",setup(Me){const p=m({input:"",prompt_temp:`# 你是一个样本挑选助手，我会提供任务背景与在这个任务背景下生成的多组样本，你需要从这些样本中挑选出针对任务背景最有优势的一个样本，同时对选中的优势样本进行错误修复、强化放大优势。

## 任务背景 

{input} 

## 多组样本 

{samples} 

数据最终结果，注意不要说明解释性内容：`,generate_num:5,top_k:0,temperature:.1,top_p:1});localStorage.getItem("generate_samples")&&(p.value.prompt_temp=localStorage.getItem("generate_samples"));const r=m(null),V=m([{generate_num:5,top_k:0,temperature:.1,top_p:1}]);m(0);const h=async i=>{if(p.value.input==="")return _this.$message("请输入数据");$.value=0,I.value=[],L(i)},I=m([]),$=m(0),x=m(!1),L=async i=>{p.value.model_name=k.value||void 0,$.value<V.value.length&&(p.value={...p.value,...V.value[$.value]}),localStorage.setItem("generate_samples",p.value.prompt_temp);let e=q.cloneDeep(p.value);x.value=!0,await H(e,i).then(a=>{a&&a.data&&(r.value=a.data),x.value=!1}).catch(a=>{x.value=!1})};m([]),m(1);const D=()=>{p.value.input="",p.value.prompt_temp=""};m("");const k=m("./big-models/"),M=m(!1);localStorage.getItem("cur_model")?k.value=localStorage.getItem("cur_model"):E().then(i=>{i&&i.data&&i.data.model_name&&(localStorage.setItem("cur_model",i.data.model_name),k.value=i.data.model_name)});const N=()=>{if(!(r.value&&r.value.samples&&r.value.samples.length>0)){_this.$message("没有可导出的结果","error");return}const e=[...r.value.samples.map((s,y)=>({id:y+1,content:s,type:"text",quality:"standard"}))],a="text";let d="",o="",u="";switch(a){case"json":d=JSON.stringify(e,null,2),o=`samples_${new Date().toISOString().split("T")[0]}.json`,u="application/json";break;case"csv":d=z(e),o=`samples_${new Date().toISOString().split("T")[0]}.csv`,u="text/csv";break;default:d=e.map(s=>{let y="";return s.type==="conversation"?y=s.content.map(U=>`${U.speaker}: ${U.message}`).join(`
`):s.type==="data"?y=JSON.stringify(s.content,null,2):y=s.content,`=== ${s.id} ===
${y}`}).join(`

`),o=`samples_${new Date().toISOString().split("T")[0]}.txt`,u="text/plain"}const b=new Blob([d],{type:`${u};charset=utf-8`}),l=URL.createObjectURL(b),g=document.createElement("a");g.href=l,g.download=o,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(l)},z=i=>{const e=["ID","Type","Content","Metadata"],a=i.map(d=>[d.id,d.type,JSON.stringify(d.content).replace(/"/g,'""'),JSON.stringify(d.metadata).replace(/"/g,'""')]);return[e,...a].map(d=>d.map(o=>`"${o}"`).join(",")).join(`
`)},R=i=>{if(!(r.value&&r.value.samples&&r.value.samples.length>0)){_this.$message("没有可复制的结果","error");return}const d=[...r.value.samples.map((o,u)=>({id:u+1,content:o,type:"text",quality:"standard"}))].map(o=>{let u="";return o.type==="conversation"?u=o.content.map(b=>`${b.speaker}: ${b.message}`).join(`
`):o.type==="data"?u=JSON.stringify(o.content,null,2):u=o.content,`=== 样本 ${o.id} ===
${u}`}).join(`

`);window._this.$copy(d)},F=i=>{k.value=i.val,M.value=!1},J=m(`我们需要设计一个更好的用户界面。界面应该简洁、直观且易于使用。
用户界面的颜色应该协调，不要太花哨。
所有按钮和链接应该清晰可见，不要隐藏在页面角落。
导航菜单应该逻辑清晰，用户能够轻松找到所需功能。
响应式设计很重要，确保在移动设备上也能良好显示。
用户反馈是改进界面的重要依据，我们应该收集并分析用户行为数据。
简化流程，减少用户完成任务所需的点击次数。
提供清晰的错误提示，帮助用户理解并解决问题。
界面加载速度要快，不要让用户等待太久。
最后，确保界面符合品牌形象和设计规范。`),S=m(!0),C=i=>{window._this.$copy(i)};return(i,e)=>{const a=w("el-button"),d=w("el-input-number"),o=w("el-scrollbar"),u=w("el-input"),b=G("loading");return _(),f("div",Q,[t("div",W,[e[13]||(e[13]=t("h1",{class:"module-title"},[t("i",{class:"fas fa-magic"}),c(" 样本生成 ")],-1)),t("div",X,[n(A,{val:k.value,onSubfn:F},null,8,["val"])])]),t("div",Y,[t("div",Z,[t("span",{onClick:e[0]||(e[0]=l=>S.value=!S.value),class:P(["js-opentitle",{on:S.value}])},e[14]||(e[14]=[t("i",{class:"fas fa-sliders-h"},null,-1),c(" 参数调整")]),2),t("div",ee,[n(a,{onClick:D,tabindex:"-1",type:"info"},{default:v(()=>e[15]||(e[15]=[t("i",{class:"fas fa-redo"},null,-1),c(" 重置")])),_:1}),n(a,{onClick:e[1]||(e[1]=l=>h(1)),tabindex:"-1",type:"info"},{default:v(()=>e[16]||(e[16]=[t("i",{class:"fas fa-random"},null,-1),c(" 动态熵温度生成")])),_:1}),n(a,{onClick:h,tabindex:"-1",type:"warning"},{default:v(()=>e[17]||(e[17]=[t("i",{class:"fas fa-play"},null,-1),c(" 生成样本")])),_:1})])]),t("div",te,[n(o,{"max-height":"300"},{default:v(()=>[t("div",le,[(_(!0),f(j,null,O(V.value,(l,g)=>(_(),f("div",se,[t("div",ae,[t("div",oe,[e[18]||(e[18]=t("label",{class:"param-label"},"生成样本数",-1)),n(d,{onFocus:e[2]||(e[2]=s=>s.target.select()),style:{width:"100%"},modelValue:l.generate_num,"onUpdate:modelValue":s=>l.generate_num=s,placeholder:"请填写卷积核",min:1,max:10,controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),t("div",ne,[e[19]||(e[19]=t("label",{class:"param-label"},"模型采样温度",-1)),n(d,{onFocus:e[3]||(e[3]=s=>s.target.select()),style:{width:"100%"},modelValue:l.temperature,"onUpdate:modelValue":s=>l.temperature=s,placeholder:"请填写min_score",min:0,max:1,controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),t("div",ie,[e[20]||(e[20]=t("label",{class:"param-label"},"模型随机采样 top_k",-1)),n(d,{onFocus:e[4]||(e[4]=s=>s.target.select()),style:{width:"100%"},modelValue:l.top_k,"onUpdate:modelValue":s=>l.top_k=s,placeholder:"请填写topk",min:0,max:100,controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),t("div",de,[e[21]||(e[21]=t("label",{class:"param-label"},"模型核取样 top_p",-1)),n(d,{onFocus:e[5]||(e[5]=s=>s.target.select()),style:{width:"100%"},modelValue:l.top_p,"onUpdate:modelValue":s=>l.top_p=s,placeholder:"请填写topk",min:0,max:1,controls:!1},null,8,["modelValue","onUpdate:modelValue"])])])]))),256))])]),_:1})])]),t("div",re,[t("div",pe,[t("div",ue,[e[23]||(e[23]=t("span",null,[t("i",{class:"fas fa-file-text"}),c(" 训练语料输入")],-1)),n(a,{onClick:e[6]||(e[6]=l=>p.value.input=J.value),size:"small",type:"info"},{default:v(()=>e[22]||(e[22]=[t("i",{class:"fas fa-file-import"},null,-1),c(" 示例")])),_:1})]),t("div",me,[n(u,{modelValue:p.value.input,"onUpdate:modelValue":e[7]||(e[7]=l=>p.value.input=l),style:{width:"100%"},rows:14,type:"textarea",placeholder:""},null,8,["modelValue"])])]),t("div",ce,[e[24]||(e[24]=t("div",{class:"titlebox"},[t("span",null,[t("i",{class:"fas fa-edit"}),c(" 自我评价修复样本提示词")])],-1)),t("div",ve,[n(u,{modelValue:p.value.prompt_temp,"onUpdate:modelValue":e[8]||(e[8]=l=>p.value.prompt_temp=l),style:{width:"100%"},rows:14,type:"textarea",placeholder:""},null,8,["modelValue"])])])]),t("div",fe,[t("div",_e,[t("div",ge,[e[28]||(e[28]=t("span",null,[t("i",{class:"fas fa-list"}),c(" 样本输出")],-1)),t("div",be,[n(a,{onClick:e[9]||(e[9]=l=>{r.value=null}),size:"small",type:"info"},{default:v(()=>e[25]||(e[25]=[t("i",{class:"fas fa-trash"},null,-1),c(" 清空")])),_:1}),n(a,{onClick:e[10]||(e[10]=l=>N()),size:"small",type:"info"},{default:v(()=>e[26]||(e[26]=[t("i",{class:"fas fa-download"},null,-1),c(" 导出")])),_:1}),n(a,{onClick:e[11]||(e[11]=l=>R()),size:"small",type:"info"},{default:v(()=>e[27]||(e[27]=[t("i",{class:"fas fa-copy"},null,-1),c(" 全部复制")])),_:1})])]),T((_(),f("div",ye,[n(o,{"max-height":"640"},{default:v(()=>[r.value&&r.value.samples?(_(),f("div",xe,[(_(!0),f(j,null,O(r.value.samples,(l,g)=>(_(),f("div",{key:g,class:"sample-item"},[t("div",ke,[t("div",we,"样本 "+K(g+1),1),t("div",Ve,[n(a,{onClick:s=>C(l),size:"small",type:"info"},{default:v(()=>e[29]||(e[29]=[t("i",{class:"fas fa-copy"},null,-1)])),_:2},1032,["onClick"])])]),t("div",{innerHTML:l,class:"sample-content"},null,8,$e)]))),128))])):(_(),f("div",Se,e[30]||(e[30]=[t("i",{class:"fas fa-file-text"},null,-1),t("p",null,'点击"生成样本"按钮开始生成',-1)])))]),_:1})])),[[b,x.value]])]),t("div",he,[e[34]||(e[34]=t("div",{style:{"border-bottom":"1px solid rgba(245, 158, 11, 0.2)",background:"linear-gradient(135deg, rgba(255, 251, 235, 0.8) 0%, rgba(254, 243, 199, 0.8) 100%)",color:"#92400e"},class:"titlebox"},[t("span",null,[t("i",{class:"fas fa-star"}),c(" 优势样本")])],-1)),T((_(),f("div",Ce,[n(o,{"max-height":"640"},{default:v(()=>[r.value&&r.value.advantage_sample?(_(),f("div",Ue,[t("div",Te,[t("div",je,[e[32]||(e[32]=t("div",{class:"advantage-sample-title"},[t("i",{class:"fas fa-star"}),c(" 优势样本 ")],-1)),t("div",Oe,[n(a,{onClick:e[12]||(e[12]=l=>C(r.value.advantage_sample)),size:"small",type:"info"},{default:v(()=>e[31]||(e[31]=[t("i",{class:"fas fa-copy"},null,-1)])),_:1})])]),t("div",{innerHTML:r.value.advantage_sample,class:"advantage-sample-content"},null,8,Ie)])])):(_(),f("div",Le,e[33]||(e[33]=[t("i",{class:"fas fa-trophy"},null,-1),t("p",null,"优势样本将在生成后显示",-1)])))]),_:1})])),[[b,x.value]])])]),e[35]||(e[35]=t("br",null,null,-1))])}}},qe=B(De,[["__scopeId","data-v-570edcb2"]]);export{qe as default};
