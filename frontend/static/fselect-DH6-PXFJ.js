import{_ as $,r as D,u as O,t as q}from"./index-yrllAQxa.js";import{r as o,w as h,b as I,P as g,u as M,p as r,t as v,U as p,ai as f,O as V,Q as P,F as T,aa as U,J as z,S as E,T as J,aq as L,aB as Q,aC as W,q as n}from"./vue-CQnFr7Mm.js";import{C as j}from"./element-DYg7Q49L.js";const A={class:"inpbox"},G={class:"selectbxo"},H={key:0,class:"c-empty"},K=["title","onClick"],X={__name:"fselect",props:{modelValue:{type:String,default:""},target_type:{type:String,default:"directory"}},emits:["subfn","update:modelValue"],setup(w,{emit:x}){const c=w,_=x;Q(),W(),O();const l=o(c.modelValue);h(()=>c.modelValue,async(t,e)=>{console.log(t,e,"watch================"),l.value=t,t!==e&&t&&b(t)}),h(()=>l.value,async(t,e)=>{l.value=t,t!==e&&(console.log(t),_("update:modelValue",t))}),I(()=>{var t;s.value=(t=y.value)==null?void 0:t.offsetWidth,s.value<300?s.value=300:s.value=s.value});const m=o(),y=o(),k=o(),s=o(320),u=o(!1),d=o([]),i=o(!1),b=async t=>{let e=t||l.value;C(e)},C=D(async t=>{if(t)try{i.value=!0;const e=await q({query:t,target_type:c.target_type||"directory"});e.code===200&&(d.value=e.data)}catch(e){console.log(e),i.value=!0}finally{i.value=!1}},300),R=()=>{u.value=!1};return(t,e)=>{const S=f("el-input"),B=f("el-scrollbar"),F=f("el-popover"),N=L("loading");return g((n(),r("div",{ref_key:"buttonRefbox",ref:y,style:{width:"100%"}},[v("div",A,[p(S,{ref_key:"buttonRef",ref:m,onBlur:e[0]||(e[0]=a=>{u.value=!1}),onFocus:e[1]||(e[1]=a=>{u.value=!0,b()}),onInput:e[2]||(e[2]=a=>{u.value=!0,_("update:modelValue",l.value)}),modelValue:l.value,"onUpdate:modelValue":e[3]||(e[3]=a=>l.value=a),placeholder:""},null,8,["modelValue"])]),p(F,{visible:u.value,width:s.value,ref_key:"popoverRef",ref:k,"virtual-triggering":!1,"virtual-ref":m.value,placement:"bottom"},{default:V(()=>[g((n(),r("div",G,[p(B,{"max-height":"500"},{default:V(()=>[d.value.length<1?(n(),r("div",H,"暂无数据")):P("",!0),(n(!0),r(T,null,U(d.value,(a,Y)=>(n(),r("div",{title:a.full_path,onClick:Z=>{l.value=a.full_path,u.value=!1},class:z([{"is-selected":l.value===a.full_path},"el-select-dropdown__item"])},[v("span",null,[e[4]||(e[4]=v("i",{style:{color:"#c2b807"},class:"fas fa-folder-open"},null,-1)),E(" "+J(a.full_path),1)])],10,K))),256))]),_:1})])),[[N,i.value]])]),_:1},8,["visible","width","virtual-ref"])])),[[M(j),R]])}}},ae=$(X,[["__scopeId","data-v-14b3ae1a"]]);export{ae as F};
