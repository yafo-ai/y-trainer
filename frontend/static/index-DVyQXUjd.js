import{r as m,p as r,t,Q as ml,P as q,S as u,U as d,O as p,ai as E,V as H,aD as I,F,aa as A,T as a,M as T,aB as fl,q as n,I as M,J as O}from"./vue-CQnFr7Mm.js";import{_ as xl,u as gl,a as yl,l as hl,e as bl,b as _l}from"./index-yrllAQxa.js";import{l as U}from"./lodash-CNPm4k7W.js";import{c as kl}from"./changeModel-BqJeIFRh.js";import{C as Vl}from"./echart-Bb3MRCfu.js";import"./element-DYg7Q49L.js";import"./fselect-DH6-PXFJ.js";const wl={class:"page-index c-text-left"},zl={class:"module-header"},Cl={class:"model"},Fl={class:"c-cardbox"},Al={class:"lbox"},Tl={class:"rbox"},$l={key:0,class:"c-cardtitlebox c-rowbox"},El={style:{"min-height":"60px"},class:"contentbox"},Ml={class:"params-grid"},Ul={class:"param-group"},Dl={class:"param-group"},Sl={class:"param-group"},Ll={class:"c-rowbox"},Bl={class:"c-cardtitlebox"},Nl={class:"titlebox"},Wl={style:{"min-height":"150px"},class:"contentbox"},jl={class:"c-rowbox"},ql={class:"c-cardtitlebox"},Hl={class:"titlebox"},Il={style:{"min-height":"150px"},class:"contentbox"},Ol={class:"c-cardtitlebox c-rowbox"},Pl={class:"contentbox"},Jl={class:"c-gred"},Ql={class:"c-cardtitlebox"},Rl={style:{"min-height":"160px"},class:"contentbox"},Gl={key:0,class:"lbox-content outputcontent"},Kl=["innerHTML"],Xl={key:1,class:"empty-state"},Yl={class:"c-cardtitlebox"},Zl={style:{"min-height":"160px"},class:"contentbox"},lt={key:0,class:"lbox-content outputcontent"},tt=["innerHTML"],et={key:1,class:"empty-state"},st={style:{"margin-top":"1.5rem"},class:"c-gred"},at={class:"c-cardtitlebox"},ot={class:"titlebox nobg"},nt={style:{"min-height":"160px"},class:"contentbox"},it={key:0,class:"outcontain"},ut={class:"lbox-content outputbox"},rt=["title","onClick"],dt={key:1,class:"empty-state"},vt={class:"c-cardtitlebox"},pt={style:{"min-height":"160px"},class:"contentbox"},ct={key:0,class:"outcontain"},mt={class:"lbox-content outputbox"},ft=["title","onClick"],xt={key:1,class:"empty-state"},gt={class:"c-cardtitlebox c-rowbox"},yt={class:"contentbox"},ht={class:"c-gred"},bt={class:"c-cardtitlebox"},_t={class:"titlebox nobg"},kt={style:{"min-height":"500px"},class:"contentbox js-curechartbox"},Vt={key:0,class:"chart-container loss-chart"},wt={class:"chart-header"},zt={class:"chart-summary"},Ct={class:"chart-range-selector"},Ft={class:"range-inputs"},At={class:"chart-content"},Tt={class:"chart-token"},$t={class:"chart-value"},Et={key:1,class:"empty-state"},Mt={class:"c-cardtitlebox"},Ut={style:{"min-height":"500px"},class:"contentbox js-curechartbox"},Dt={key:0,class:"chart-container loss-chart"},St={class:"chart-header"},Lt={class:"chart-summary"},Bt={class:"chart-range-selector"},Nt={class:"range-inputs"},Wt={class:"chart-content"},jt={class:"chart-token"},qt={class:"chart-value"},Ht={key:1,class:"empty-state"},It={class:"c-cardtitlebox c-rowbox"},Ot={class:"contentbox"},Pt={class:"c-gred"},Jt={class:"c-cardtitlebox"},Qt={class:"titlebox nobg"},Rt={style:{"min-height":"500px"},class:"contentbox js-curechartbox"},Gt={key:0,class:"chart-container loss-chart"},Kt={class:"chart-header"},Xt={class:"chart-summary"},Yt={class:"chart-range-selector"},Zt={class:"range-inputs"},le={class:"chart-content"},te={class:"chart-token"},ee={class:"chart-value"},se={key:1,class:"empty-state"},ae={class:"c-cardtitlebox"},oe={style:{"min-height":"500px"},class:"contentbox js-curechartbox"},ne={key:0,class:"chart-container loss-chart"},ie={class:"chart-header"},ue={class:"chart-summary"},re={class:"chart-range-selector"},de={class:"range-inputs"},ve={class:"chart-content"},pe={class:"chart-token"},ce={class:"chart-value"},me={key:1,class:"empty-state"},fe={class:"c-cardtitlebox c-rowbox"},xe={style:{"min-height":"640px"},class:"contentbox"},ge={key:1,class:"empty-state"},ye={__name:"index",setup(he){gl(),fl();const h=m({input:"",output:""}),b=m(null),S=m(null),P=m(null),y=m("1"),_=m(null),k=m(null),V=m(null),w=m(null),ll=async()=>{if(h.value.input==="")return _this.$message("请输入数据","error");y.value=="1"?tl():y.value=="2"?el():y.value=="3"?sl():y.value=="4"&&pl()},tl=async()=>{h.value.model_name=D.value||void 0;const s=await yl(h.value);s&&s.data&&(b.value=s.data),$("input"),$("output")},el=async()=>{h.value.model_name=D.value||void 0;const s=await hl(h.value);s&&s.data&&(S.value=s.data),L("input",S.value),L("output",S.value)},sl=async()=>{h.value.model_name=D.value||void 0;const s=await bl(h.value);s&&s.data&&(P.value=s.data),L("input",P.value),L("output",P.value)},al=(s,l)=>{let o=[],v=U.cloneDeep(s),g=l;return v.forEach(f=>{f&&f.indexOf(`
`)>-1?o.push(f.replace(/\n/g,g)):o.push(f)}),o};m(null),m(null);const L=(s,l)=>{let o=s==="input"?U.cloneDeep(l.origin_output_tokens):U.cloneDeep(l.output_tokens),v=s==="input"?U.cloneDeep(l.origin_loss_per_token):U.cloneDeep(l.loss_per_token);o=al(o,"\\n");let g=Math.max(...v),f=Math.min(...v),x=v.reduce((e,i)=>e+i,0)/v.length,c=[];return o.forEach((e,i)=>{c.push({text:e&&e.replace(/\n/g,"\\n"),value:v[i],maxVal:g,minVal:f,bar:v[i]/g*100})}),y.value==="2"?s==="input"?_.value={list:c,maxVal:g.toFixed(3),maxAllVal:g.toFixed(3)+.001,minAllVal:f.toFixed(3),minVal:f.toFixed(3),min:0,max:g.toFixed(3),average:x}:k.value={list:c,maxAllVal:g.toFixed(3)+.001,minAllVal:f.toFixed(3),maxVal:g.toFixed(3),minVal:f.toFixed(3),min:0,max:g.toFixed(3),average:x}:y.value==="3"&&(s==="input"?V.value={list:c,maxAllVal:g.toFixed(3)+.001,minAllVal:f.toFixed(3),maxVal:g.toFixed(3),minVal:f.toFixed(3),min:0,max:g.toFixed(3),average:x}:w.value={list:c,maxAllVal:g.toFixed(3)+.001,minAllVal:f.toFixed(3),maxVal:g.toFixed(3),minVal:f.toFixed(3),min:0,max:g.toFixed(3),average:x}),c},C=s=>{if(!s)return[];let l=U.cloneDeep(s.list),o=l.filter(c=>c.value>=s.min&&c.value<=s.max),v=[];o.forEach(c=>{v.push(c.value)});let g=Math.max(...v),f=Math.min(...v),x=v.reduce((c,e)=>c+e,0)/v.length;return s.average=x.toFixed(3),s.minVal=f.toFixed(3),s.maxVal=g.toFixed(3),console.log("filters",s),l.filter(c=>c.value>=s.min&&c.value<=s.max)},J=m([]),Q=m([]),R=m(1),G=m(1),$=(s,l)=>{console.log(s,l);let o=[];nl.value="",il.value="";let v="";if(s==="input"){B.value=l,l!==void 0?(v=b.value.origin_output_tokens[B.value],o=b.value.origin_attention_scores[l]):(v="",b.value.origin_attention_scores.forEach((x,c)=>{x.forEach((e,i)=>{o[i]||(o[i]=0),o[i]+=e})})),R.value=Math.max(...o);let g=Math.min(...o),f=[];b.value.input_tokens.forEach((x,c)=>{f.push({text:x&&x.replace(/\n/g,"\\n"),value:o[c],maxVal:R.value,answer:v,minVal:g,color:Y(o[c],R.value)})}),J.value=f}else{N.value=l,l!==void 0?(v=b.value.output_tokens[N.value],o=b.value.attention_scores[l]):(v="",b.value.attention_scores.forEach((x,c)=>{x.forEach((e,i)=>{o[i]||(o[i]=0),o[i]+=e})})),G.value=Math.max(...o);let g=Math.min(...o),f=[];b.value.input_tokens.forEach((x,c)=>{f.push({text:x&&x.replace(/\n/g,"\\n"),value:o[c],maxVal:G.value,minVal:g,answer:v,color:Y(o[c],G.value)})}),Q.value=f}},Y=(s,l)=>`rgba(2, 169, 169,${s/l})`,B=m(void 0),N=m(void 0),ol=()=>{h.value.input="",h.value.output="",y.value==="4"&&(z.value={is_grenerate_output:!1,input:"",output:"",smooth_window:5,z_score_threshold:.5})},nl=m(""),il=m(""),D=m("./big-models/"),ul=m(!1),rl=s=>{D.value=s.val,ul.value=!1},dl=m('大语言模型是一种人工智能系统，它通过学习大量的文本数据来理解和生成人类语言。想象一下，它就像是一个"超级记事本"，记住了互联网上的大量文章、书籍和对话。'),vl=m(`请解释一下什么是大语言模型，以及它们是如何工作的？
请用通俗易懂的语言回答，适合非技术人员理解。`),K=s=>{s&&window._this.$copy(s)},Z=s=>`${s.length>0?s.reduce((o,v)=>o+v,0)/s.length:0}`,z=m({is_grenerate_output:!1,input:"",output:"",smooth_window:5,z_score_threshold:.5}),W=m(null),X=m(null),pl=async()=>{if(z.value.input=h.value.input,z.value.output=h.value.output,!z.value.is_grenerate_output&&!z.value.output)return window._this.$message("请输入问题和期望答案后再进行操作","error");_l(z.value).then(s=>{s&&s.code===200&&(h.value.input=s.data.input,h.value.output=s.data.output,z.value.input=s.data.input,z.value.output=s.data.output,W.value=s.data.result,X.value&&X.value.init(W.value))})},j=(s,l)=>s&&s.toFixed?s.toFixed(l):s;return(s,l)=>{const o=E("el-button"),v=E("el-input-number"),g=E("el-switch"),f=E("el-input"),x=E("el-popover"),c=E("el-scrollbar");return n(),r("div",wl,[t("div",zl,[l[30]||(l[30]=t("h1",{class:"module-title"},[t("i",{class:"fas fa-brain"}),u(" 注意力分析 ")],-1)),t("div",Cl,[d(kl,{val:D.value,onSubfn:rl},null,8,["val"])])]),t("div",Fl,[t("div",Al,[d(o,{size:"large",onClick:l[0]||(l[0]=e=>y.value="1"),type:y.value=="1"?"primary":"info"},{default:p(()=>l[31]||(l[31]=[t("i",{class:"fas fa-chart-bar"},null,-1),u(" 注意力分数分析")])),_:1},8,["type"]),d(o,{size:"large",onClick:l[1]||(l[1]=e=>y.value="2"),type:y.value=="2"?"primary":"info"},{default:p(()=>l[32]||(l[32]=[t("i",{class:"fas fa-chart-line"},null,-1),u(" Token损失分析")])),_:1},8,["type"]),d(o,{size:"large",onClick:l[2]||(l[2]=e=>y.value="3"),type:y.value=="3"?"primary":"info"},{default:p(()=>l[33]||(l[33]=[t("i",{class:"fas fa-random"},null,-1),u(" Token熵分析")])),_:1},8,["type"]),d(o,{size:"large",onClick:l[3]||(l[3]=e=>y.value="4"),type:y.value=="4"?"primary":"info"},{default:p(()=>l[34]||(l[34]=[t("i",{class:"fas fa-text-width"},null,-1),u(" Token异常分析")])),_:1},8,["type"])]),t("div",Tl,[d(o,{onClick:ol,tabindex:"-1",type:"info"},{default:p(()=>l[35]||(l[35]=[t("i",{class:"fas fa-redo"},null,-1),u(" 重置")])),_:1}),d(o,{onClick:ll,tabindex:"-1",type:"primary"},{default:p(()=>l[36]||(l[36]=[t("i",{class:"fas fa-play"},null,-1),u(" 生成分析")])),_:1})])]),y.value==4?(n(),r("div",$l,[t("div",El,[t("div",Ml,[t("div",Ul,[l[37]||(l[37]=t("label",{class:"param-label"}," token窗口大小 ",-1)),d(v,{"controls-position":"right",step:1,min:1,onFocus:l[4]||(l[4]=e=>e.target.select()),style:{width:"100%"},modelValue:z.value.smooth_window,"onUpdate:modelValue":l[5]||(l[5]=e=>z.value.smooth_window=e),placeholder:""},null,8,["modelValue"])]),t("div",Dl,[l[38]||(l[38]=t("label",{class:"param-label"}," 判定异常阈值(熵和损失的背离阈值) ",-1)),d(v,{controls:!1,onFocus:l[6]||(l[6]=e=>e.target.select()),style:{width:"100%"},modelValue:z.value.z_score_threshold,"onUpdate:modelValue":l[7]||(l[7]=e=>z.value.z_score_threshold=e),placeholder:""},null,8,["modelValue"])]),t("div",Sl,[l[39]||(l[39]=t("label",{class:"param-label"},"模型生成输出",-1)),d(g,{modelValue:z.value.is_grenerate_output,"onUpdate:modelValue":l[8]||(l[8]=e=>z.value.is_grenerate_output=e)},null,8,["modelValue"])])])])])):ml("",!0),t("div",Ll,[t("div",Bl,[t("div",Nl,[l[41]||(l[41]=t("span",null,[t("i",{class:"fas fa-question-circle"}),u(" 输入内容 (问题/提示) "),t("span",{class:"c-danger"},"*")],-1)),d(o,{onClick:l[9]||(l[9]=e=>h.value.input=vl.value),size:"small",type:"info"},{default:p(()=>l[40]||(l[40]=[t("i",{class:"fas fa-file-import"},null,-1),u(" 示例")])),_:1})]),t("div",Wl,[d(f,{modelValue:h.value.input,"onUpdate:modelValue":l[10]||(l[10]=e=>h.value.input=e),style:{width:"100%"},rows:7,type:"textarea",placeholder:""},null,8,["modelValue"])])])]),t("div",jl,[t("div",ql,[t("div",Hl,[l[43]||(l[43]=t("span",null,[t("i",{class:"fas fa-bullseye"}),u(" 目标输出 (期望答案)")],-1)),d(o,{onClick:l[11]||(l[11]=e=>h.value.output=dl.value),size:"small",type:"info"},{default:p(()=>l[42]||(l[42]=[t("i",{class:"fas fa-file-import"},null,-1),u(" 示例")])),_:1})]),t("div",Il,[d(f,{disabled:z.value.is_grenerate_output&&y.value==4,modelValue:h.value.output,"onUpdate:modelValue":l[12]||(l[12]=e=>h.value.output=e),style:{width:"100%"},rows:7,type:"textarea",placeholder:""},null,8,["disabled","modelValue"])])])]),q(t("div",Ol,[l[52]||(l[52]=I('<div class="titlebox" data-v-7a9e44c8><div class="tl" data-v-7a9e44c8>注意力分数对比分析 <div style="font-size:0.75rem;color:#6b7280;margin-top:0.5rem;font-weight:normal;" data-v-7a9e44c8><i class="fas fa-info-circle" data-v-7a9e44c8></i><strong style="font-weight:bold;" data-v-7a9e44c8>使用步骤：</strong>1️⃣ 先点击左右两侧答案中的token（或All按钮）查看注意力高亮；2️⃣ 再点击对应下方高亮的问题token查看详细分数。<br data-v-7a9e44c8><small style="color:#6b7280;margin-top:4px;display:block;" data-v-7a9e44c8><i class="fas fa-lightbulb" data-v-7a9e44c8></i> 提示：左右两侧独立操作，互不影响。分数显示在对应区域下方。</small></div></div></div>',1)),t("div",Pl,[t("div",Jl,[t("div",Ql,[l[45]||(l[45]=t("div",{class:"titlebox nobg"},[t("span",{style:{"font-size":"0.85em",color:"#6b7280"}},"原始问题/提示 - 注意力高亮 (模型答案)")],-1)),t("div",Rl,[J.value.length>0?(n(),r("div",Gl,[(n(!0),r(F,null,A(J.value,(e,i)=>(n(),T(x,{key:i,"show-after":500,placement:"top","popper-style":{width:"auto",padding:"10px",minWidth:"80px"},trigger:"hover"},{reference:p(()=>[(n(),r("span",{class:"item",style:M("background-color:"+e.color),key:i,innerHTML:e.text},null,12,Kl))]),default:p(()=>[t("div",null,a(e.value)+" "+a(e.answer?"|对应模型答案token: "+e.answer:""),1)]),_:2},1024))),128))])):(n(),r("div",Xl,l[44]||(l[44]=[t("i",{class:"fas fa-question-circle"},null,-1),t("p",null,"点击上方模型答案的token查看注意力分数",-1)])))])]),t("div",Yl,[l[47]||(l[47]=t("div",{class:"titlebox nobg"},[t("span",{style:{"font-size":"0.85em",color:"#6b7280"}},"原始问题/提示 - 注意力高亮 (目标答案)")],-1)),t("div",Zl,[Q.value.length>0?(n(),r("div",lt,[(n(!0),r(F,null,A(Q.value,(e,i)=>(n(),T(x,{key:i,"show-after":500,placement:"top","popper-style":{width:"auto",padding:"10px",minWidth:"80px"},trigger:"hover"},{reference:p(()=>[(n(),r("span",{class:"item",style:M("background-color:"+e.color),key:i,innerHTML:e.text},null,12,tt))]),default:p(()=>[t("div",null,a(e.value)+" "+a(e.answer?"| 对应模型答案token: "+e.answer:""),1)]),_:2},1024))),128))])):(n(),r("div",et,l[46]||(l[46]=[t("i",{class:"fas fa-question-circle"},null,-1),t("p",null,"点击上方目标答案的token查看注意力分数",-1)])))])])]),t("div",st,[t("div",at,[t("div",ot,[l[48]||(l[48]=t("span",null,[t("i",{class:"fas fa-robot"}),t("span",null,"模型生成答案")],-1)),d(o,{size:"small",type:"info"},{default:p(()=>[t("i",{onClick:l[13]||(l[13]=e=>K(b.value.origin_output_tokens)),title:"复制完整答案",class:"fas fa-copy"})]),_:1})]),t("div",nt,[b.value&&b.value.origin_output_tokens?(n(),r("div",it,[d(c,null,{default:p(()=>[t("div",ut,[t("div",{title:"查看所有token的平均注意力分布",class:O(["item all",{on:B.value===void 0}]),onClick:l[14]||(l[14]=e=>$("input",void 0))}," All ",2),(n(!0),r(F,null,A(b.value.origin_output_tokens,(e,i)=>(n(),r("div",{class:O(["item",{on:B.value===i}]),title:Z(b.value.origin_attention_scores[i],"1"),onClick:cl=>$("input",i),key:i},a(e),11,rt))),128))])]),_:1})])):(n(),r("div",dt,l[49]||(l[49]=[t("i",{class:"fas fa-robot"},null,-1),t("p",null,"模型生成的答案将在这里显示",-1)])))])]),t("div",vt,[l[51]||(l[51]=t("div",{class:"titlebox nobg"},[t("span",null,[t("i",{class:"fas fa-bullseye"}),t("span",null,"目标期望答案")])],-1)),t("div",pt,[b.value&&b.value.output_tokens?(n(),r("div",ct,[d(c,null,{default:p(()=>[t("div",mt,[t("div",{title:"查看所有token的平均注意力分布",class:O(["item all",{on:N.value===void 0}]),onClick:l[15]||(l[15]=e=>$("output",void 0))}," All ",2),(n(!0),r(F,null,A(b.value.output_tokens,(e,i)=>(n(),r("div",{class:O(["item",{on:N.value===i}]),title:Z(b.value.attention_scores[i],"2"),onClick:cl=>$("output",i),key:i},a(e),11,ft))),128))])]),_:1})])):(n(),r("div",xt,l[50]||(l[50]=[t("i",{class:"fas fa-bullseye"},null,-1),t("p",null,"目标期望答案将在这里显示",-1)])))])])])])],512),[[H,y.value=="1"]]),q(t("div",gt,[l[73]||(l[73]=I('<div class="titlebox" data-v-7a9e44c8><div class="tl" data-v-7a9e44c8><span style="color:rgb(220, 38, 38);" data-v-7a9e44c8>Token损失分析对比</span><div style="font-size:0.75rem;color:#6b7280;margin-top:0.5rem;font-weight:normal;" data-v-7a9e44c8><i class="fas fa-exclamation-triangle" style="color:#dc2626;" data-v-7a9e44c8></i> 对比模型答案和目标答案的Token损失分布，损失值越高表示预测难度越大 </div></div></div>',1)),t("div",yt,[t("div",ht,[t("div",bt,[t("div",_t,[l[53]||(l[53]=t("span",null,[t("i",{class:"fas fa-robot"}),t("span",null,"模型生成答案")],-1)),d(o,{size:"small",type:"info"},{default:p(()=>[t("i",{onClick:l[16]||(l[16]=e=>K(b.value.origin_output_tokens)),title:"复制完整答案",class:"fas fa-copy"})]),_:1})]),t("div",kt,[_.value?(n(),r("div",Vt,[t("div",wt,[l[58]||(l[58]=t("div",{class:"chart-title"},[t("i",{class:"fas fa-chart-bar"}),u(" 损失值分析 (模型答案) ")],-1)),t("div",zt,[t("span",null,[l[54]||(l[54]=t("i",{class:"fas fa-list"},null,-1)),u(" "+a(C(_.value).length)+"个token (损失值: "+a(_.value.min)+"-"+a(_.value.max)+")",1)]),t("span",null,[l[55]||(l[55]=t("i",{class:"fas fa-arrow-up"},null,-1)),u(" 最大: "+a(_.value.maxVal),1)]),t("span",null,[l[56]||(l[56]=t("i",{class:"fas fa-arrow-down"},null,-1)),u(" 最小: "+a(_.value.minVal),1)]),t("span",null,[l[57]||(l[57]=t("i",{class:"fas fa-calculator"},null,-1)),u(" 平均: "+a(_.value.average),1)])])]),t("div",Ct,[l[61]||(l[61]=t("div",{class:"range-selector-label"},[t("i",{class:"fas fa-filter"}),u(" 损失值范围: ")],-1)),t("div",Ft,[d(v,{"controls-position":"right",style:{width:"100px"},modelValue:_.value.min,"onUpdate:modelValue":l[17]||(l[17]=e=>_.value.min=e),placeholder:"",size:"small",min:0,max:_.value.maxAllVal,step:.001},null,8,["modelValue","max"]),l[60]||(l[60]=t("span",{style:{margin:"0 10px"},class:"range-separator"},"-",-1)),d(v,{"controls-position":"right",style:{width:"100px"},modelValue:_.value.max,"onUpdate:modelValue":l[18]||(l[18]=e=>_.value.max=e),placeholder:"",size:"small",min:0,max:_.value.maxAllVal,step:.001},null,8,["modelValue","max"]),d(o,{onClick:l[19]||(l[19]=e=>{_.value.min=0,_.value.max=_.value.maxAllVal}),style:{"margin-left":"10px"},type:"info",size:"small"},{default:p(()=>l[59]||(l[59]=[t("i",{class:"fas fa-refresh"},null,-1),u(" 重置")])),_:1})])]),d(c,{"max-height":"500"},{default:p(()=>[t("div",At,[(n(!0),r(F,null,A(C(_.value),(e,i)=>(n(),T(x,{effect:"dark",key:i,"show-after":200,placement:"top","popper-style":{width:"auto",padding:"10px",minWidth:"80px"},trigger:"hover"},{reference:p(()=>[(n(),r("div",{key:i,class:"chart-item"},[t("div",Tt,a(e.text),1),t("div",{class:"chart-bar loss-very-high",style:M("width: "+e.bar+"%")},null,4),t("div",$t,a(j(e.value,6)),1)]))]),default:p(()=>[t("div",null,"Token："+a(e.text)+"（Loss："+a(e.value)+"）",1)]),_:2},1024))),128))])]),_:1})])):(n(),r("div",Et,l[62]||(l[62]=[t("i",{class:"fas fa-chart-bar"},null,-1),t("p",null,"模型答案柱状图将在这里显示",-1)])))])]),t("div",Mt,[l[72]||(l[72]=t("div",{class:"titlebox nobg"},[t("span",null,[t("i",{class:"fas fa-bullseye"}),t("span",null,"目标期望答案")])],-1)),t("div",Ut,[k.value?(n(),r("div",Dt,[t("div",St,[l[67]||(l[67]=t("div",{class:"chart-title"},[t("i",{class:"fas fa-chart-bar"}),u(" 损失值分析 (目标答案) ")],-1)),t("div",Lt,[t("span",null,[l[63]||(l[63]=t("i",{class:"fas fa-list"},null,-1)),u(" "+a(C(k.value).length)+"个token (损失值: "+a(k.value.min)+"-"+a(k.value.max)+")",1)]),t("span",null,[l[64]||(l[64]=t("i",{class:"fas fa-arrow-up"},null,-1)),u(" 最大: "+a(k.value.maxVal),1)]),t("span",null,[l[65]||(l[65]=t("i",{class:"fas fa-arrow-down"},null,-1)),u(" 最小: "+a(k.value.minVal),1)]),t("span",null,[l[66]||(l[66]=t("i",{class:"fas fa-calculator"},null,-1)),u(" 平均: "+a(k.value.average),1)])])]),t("div",Bt,[l[70]||(l[70]=t("div",{class:"range-selector-label"},[t("i",{class:"fas fa-filter"}),u(" 损失值范围: ")],-1)),t("div",Nt,[d(v,{"controls-position":"right",style:{width:"100px"},modelValue:k.value.min,"onUpdate:modelValue":l[20]||(l[20]=e=>k.value.min=e),placeholder:"",size:"small",min:0,max:k.value.maxAllVal,step:.001},null,8,["modelValue","max"]),l[69]||(l[69]=t("span",{style:{margin:"0 10px"},class:"range-separator"},"-",-1)),d(v,{"controls-position":"right",style:{width:"100px"},modelValue:k.value.max,"onUpdate:modelValue":l[21]||(l[21]=e=>k.value.max=e),placeholder:"",size:"small",min:0,max:k.value.maxAllVal,step:.001},null,8,["modelValue","max"]),d(o,{onClick:l[22]||(l[22]=e=>{k.value.min=0,k.value.max=k.value.maxAllVal}),style:{"margin-left":"10px"},type:"info",size:"small"},{default:p(()=>l[68]||(l[68]=[t("i",{class:"fas fa-refresh"},null,-1),u(" 重置")])),_:1})])]),d(c,{"max-height":"500"},{default:p(()=>[t("div",Wt,[(n(!0),r(F,null,A(C(k.value),(e,i)=>(n(),T(x,{effect:"dark",key:i,"show-after":200,placement:"top","popper-style":{width:"auto",padding:"10px",minWidth:"80px"},trigger:"hover"},{reference:p(()=>[(n(),r("div",{key:i,class:"chart-item"},[t("div",jt,a(e.text),1),t("div",{class:"chart-bar loss-very-high",style:M("width: "+e.bar+"%")},null,4),t("div",qt,a(j(e.value,6)),1)]))]),default:p(()=>[t("div",null,"Token："+a(e.text)+"（Loss："+a(e.value)+"）",1)]),_:2},1024))),128))])]),_:1})])):(n(),r("div",Ht,l[71]||(l[71]=[t("i",{class:"fas fa-chart-bar"},null,-1),t("p",null,"模型答案柱状图将在这里显示",-1)])))])])])])],512),[[H,y.value=="2"]]),q(t("div",It,[l[94]||(l[94]=I('<div class="titlebox" data-v-7a9e44c8><div class="tl" data-v-7a9e44c8><span style="color:rgb(37, 99, 235);" data-v-7a9e44c8>Token熵分析对比</span><div style="font-size:0.75rem;color:#6b7280;margin-top:0.5rem;font-weight:normal;" data-v-7a9e44c8><i class="fas fa-chart-area" style="color:#2563eb;" data-v-7a9e44c8></i> 对比模型答案和目标答案的Token熵分布，熵值越高表示选择不确定性越大 </div></div></div>',1)),t("div",Ot,[t("div",Pt,[t("div",Jt,[t("div",Qt,[l[74]||(l[74]=t("span",null,[t("i",{class:"fas fa-robot"}),t("span",null,"模型生成答案")],-1)),d(o,{size:"small",type:"info"},{default:p(()=>[t("i",{onClick:l[23]||(l[23]=e=>K(S.value.origin_output_tokens)),title:"复制完整答案",class:"fas fa-copy"})]),_:1})]),t("div",Rt,[V.value?(n(),r("div",Gt,[t("div",Kt,[l[79]||(l[79]=t("div",{class:"chart-title"},[t("i",{class:"fas fa-chart-bar"}),u(" 熵值分析 (模型答案) ")],-1)),t("div",Xt,[t("span",null,[l[75]||(l[75]=t("i",{class:"fas fa-list"},null,-1)),u(" "+a(C(V.value).length)+"个token (损失值: "+a(V.value.min)+"-"+a(V.value.max)+")",1)]),t("span",null,[l[76]||(l[76]=t("i",{class:"fas fa-arrow-up"},null,-1)),u(" 最大: "+a(V.value.maxVal),1)]),t("span",null,[l[77]||(l[77]=t("i",{class:"fas fa-arrow-down"},null,-1)),u(" 最小: "+a(V.value.minVal),1)]),t("span",null,[l[78]||(l[78]=t("i",{class:"fas fa-calculator"},null,-1)),u(" 平均: "+a(V.value.average),1)])])]),t("div",Yt,[l[82]||(l[82]=t("div",{class:"range-selector-label"},[t("i",{class:"fas fa-filter"}),u(" 熵值范围: ")],-1)),t("div",Zt,[d(v,{"controls-position":"right",style:{width:"100px"},modelValue:V.value.min,"onUpdate:modelValue":l[24]||(l[24]=e=>V.value.min=e),placeholder:"",size:"small",min:0,max:V.value.maxAllVal,step:.001},null,8,["modelValue","max"]),l[81]||(l[81]=t("span",{style:{margin:"0 10px"},class:"range-separator"},"-",-1)),d(v,{"controls-position":"right",style:{width:"100px"},modelValue:V.value.max,"onUpdate:modelValue":l[25]||(l[25]=e=>V.value.max=e),placeholder:"",size:"small",min:0,max:V.value.maxAllVal,step:.001},null,8,["modelValue","max"]),d(o,{onClick:l[26]||(l[26]=e=>{V.value.min=0,V.value.max=V.value.maxAllVal}),style:{"margin-left":"10px"},type:"info",size:"small"},{default:p(()=>l[80]||(l[80]=[t("i",{class:"fas fa-refresh"},null,-1),u(" 重置")])),_:1})])]),d(c,{"max-height":"500"},{default:p(()=>[t("div",le,[(n(!0),r(F,null,A(C(V.value),(e,i)=>(n(),T(x,{effect:"dark",key:i,"show-after":200,placement:"top","popper-style":{width:"auto",padding:"10px",minWidth:"80px"},trigger:"hover"},{reference:p(()=>[(n(),r("div",{key:i,class:"chart-item"},[t("div",te,a(e.text),1),t("div",{class:"chart-bar loss-very-high",style:M("width: "+e.bar+"%")},null,4),t("div",ee,a(j(e.value,6)),1)]))]),default:p(()=>[t("div",null,"Token："+a(e.text)+"（熵值："+a(e.value)+"）",1)]),_:2},1024))),128))])]),_:1})])):(n(),r("div",se,l[83]||(l[83]=[t("i",{class:"fas fa-chart-bar"},null,-1),t("p",null,"模型答案柱状图将在这里显示",-1)])))])]),t("div",ae,[l[93]||(l[93]=t("div",{class:"titlebox nobg"},[t("span",null,[t("i",{class:"fas fa-bullseye"}),t("span",null,"目标期望答案")])],-1)),t("div",oe,[w.value?(n(),r("div",ne,[t("div",ie,[l[88]||(l[88]=t("div",{class:"chart-title"},[t("i",{class:"fas fa-chart-bar"}),u(" 熵值分析 (目标答案) ")],-1)),t("div",ue,[t("span",null,[l[84]||(l[84]=t("i",{class:"fas fa-list"},null,-1)),u(" "+a(C(w.value).length)+"个token (损失值: "+a(w.value.min)+"-"+a(w.value.max)+")",1)]),t("span",null,[l[85]||(l[85]=t("i",{class:"fas fa-arrow-up"},null,-1)),u(" 最大: "+a(w.value.maxVal),1)]),t("span",null,[l[86]||(l[86]=t("i",{class:"fas fa-arrow-down"},null,-1)),u(" 最小: "+a(w.value.minVal),1)]),t("span",null,[l[87]||(l[87]=t("i",{class:"fas fa-calculator"},null,-1)),u(" 平均: "+a(w.value.average),1)])])]),t("div",re,[l[91]||(l[91]=t("div",{class:"range-selector-label"},[t("i",{class:"fas fa-filter"}),u(" 熵值范围: ")],-1)),t("div",de,[d(v,{"controls-position":"right",style:{width:"100px"},modelValue:w.value.min,"onUpdate:modelValue":l[27]||(l[27]=e=>w.value.min=e),placeholder:"",size:"small",min:0,max:w.value.maxAllVal,step:.001},null,8,["modelValue","max"]),l[90]||(l[90]=t("span",{style:{margin:"0 10px"},class:"range-separator"},"-",-1)),d(v,{"controls-position":"right",style:{width:"100px"},modelValue:w.value.max,"onUpdate:modelValue":l[28]||(l[28]=e=>w.value.max=e),placeholder:"",size:"small",min:0,max:w.value.maxAllVal,step:.001},null,8,["modelValue","max"]),d(o,{onClick:l[29]||(l[29]=e=>{w.value.min=0,w.value.max=w.value.maxAllVal}),style:{"margin-left":"10px"},type:"info",size:"small"},{default:p(()=>l[89]||(l[89]=[t("i",{class:"fas fa-refresh"},null,-1),u(" 重置")])),_:1})])]),d(c,{"max-height":"500"},{default:p(()=>[t("div",ve,[(n(!0),r(F,null,A(C(w.value),(e,i)=>(n(),T(x,{effect:"dark",key:i,"show-after":200,placement:"top","popper-style":{width:"auto",padding:"10px",minWidth:"80px"},trigger:"hover"},{reference:p(()=>[(n(),r("div",{key:i,class:"chart-item"},[t("div",pe,a(e.text),1),t("div",{class:"chart-bar loss-very-high",style:M("width: "+e.bar+"%")},null,4),t("div",ce,a(j(e.value,6)),1)]))]),default:p(()=>[t("div",null,"Token："+a(e.text)+"（熵值："+a(e.value)+"）",1)]),_:2},1024))),128))])]),_:1})])):(n(),r("div",me,l[92]||(l[92]=[t("i",{class:"fas fa-chart-bar"},null,-1),t("p",null,"模型答案柱状图将在这里显示",-1)])))])])])])],512),[[H,y.value=="3"]]),q(t("div",fe,[l[96]||(l[96]=I('<div class="titlebox" data-v-7a9e44c8><div class="tl" data-v-7a9e44c8><span style="color:rgb(102 187 220);" data-v-7a9e44c8>Token异常分析</span><div style="font-size:0.75rem;color:#6b7280;margin-top:0.5rem;font-weight:normal;" data-v-7a9e44c8><i class="fas fa-sitemap" style="color:rgb(102 187 220);" data-v-7a9e44c8></i> 对输入内容和目标输出的Token异常分析 </div></div></div>',1)),t("div",xe,[W.value?(n(),T(Vl,{key:0,ref_key:"curechart",ref:X,isnoDialog:!0,title:" ",data:W.value},null,8,["data"])):(n(),r("div",ge,l[95]||(l[95]=[t("i",{class:"fas fa-chart-bar"},null,-1),t("p",null,"Token异常分析将在这里显示",-1)])))])],512),[[H,y.value==4]]),l[97]||(l[97]=t("br",null,null,-1))])}}},Fe=xl(ye,[["__scopeId","data-v-7a9e44c8"]]);export{Fe as default};
