import{r as f,p as r,t as l,P,S as u,U as v,O as d,ai as D,V as J,aD as G,F as z,aa as A,T as e,q as i,J as W,M as $,I as E}from"./vue-CQnFr7Mm.js";import{l as M}from"./fselect-B6x0UeyF.js";import{_ as ul,c as rl,a as dl,l as vl,e as cl}from"./index-CARMBqMV.js";import{c as pl}from"./changeModel-CIi0xNCm.js";import"./element-DYg7Q49L.js";const ml={class:"page-index c-text-left"},fl={class:"module-header"},xl={class:"model"},gl={class:"c-cardbox"},yl={class:"lbox"},hl={class:"rbox"},bl={class:"c-gred c-rowbox"},_l={class:"c-cardtitlebox"},kl={class:"titlebox"},Vl={class:"contentbox"},wl={class:"c-cardtitlebox"},Fl={class:"titlebox"},zl={class:"contentbox"},Al={class:"c-cardtitlebox c-rowbox"},Cl={class:"contentbox"},Tl={class:"c-gred"},$l={class:"c-cardtitlebox"},El={class:"titlebox nobg"},Ml={style:{"min-height":"160px"},class:"contentbox"},Dl={key:0,class:"outcontain"},Sl={class:"lbox-content outputbox"},Ul=["title","onClick"],Il={key:1,class:"empty-state"},Ll={class:"c-cardtitlebox"},Wl={style:{"min-height":"160px"},class:"contentbox"},Bl={key:0,class:"outcontain"},Nl={class:"lbox-content outputbox"},jl=["title","onClick"],ql={key:1,class:"empty-state"},Hl={style:{"margin-top":"1.5rem"},class:"c-gred"},Ol={class:"c-cardtitlebox"},Pl={style:{"min-height":"160px"},class:"contentbox"},Jl={key:0,class:"lbox-content outputcontent"},Gl=["innerHTML"],Kl={key:1,class:"empty-state"},Ql={class:"c-cardtitlebox"},Rl={style:{"min-height":"160px"},class:"contentbox"},Xl={key:0,class:"lbox-content outputcontent"},Yl=["innerHTML"],Zl={key:1,class:"empty-state"},lt={class:"c-cardtitlebox c-rowbox"},tt={class:"contentbox"},at={class:"c-gred"},st={class:"c-cardtitlebox"},et={class:"titlebox nobg"},ot={style:{"min-height":"500px"},class:"contentbox js-curechartbox"},nt={key:0,class:"chart-container loss-chart"},it={class:"chart-header"},ut={class:"chart-summary"},rt={class:"chart-range-selector"},dt={class:"range-inputs"},vt={class:"chart-content"},ct={class:"chart-token"},pt={class:"chart-value"},mt={key:1,class:"empty-state"},ft={class:"c-cardtitlebox"},xt={style:{"min-height":"500px"},class:"contentbox js-curechartbox"},gt={key:0,class:"chart-container loss-chart"},yt={class:"chart-header"},ht={class:"chart-summary"},bt={class:"chart-range-selector"},_t={class:"range-inputs"},kt={class:"chart-content"},Vt={class:"chart-token"},wt={class:"chart-value"},Ft={key:1,class:"empty-state"},zt={class:"c-cardtitlebox c-rowbox"},At={class:"contentbox"},Ct={class:"c-gred"},Tt={class:"c-cardtitlebox"},$t={class:"titlebox nobg"},Et={style:{"min-height":"500px"},class:"contentbox js-curechartbox"},Mt={key:0,class:"chart-container loss-chart"},Dt={class:"chart-header"},St={class:"chart-summary"},Ut={class:"chart-range-selector"},It={class:"range-inputs"},Lt={class:"chart-content"},Wt={class:"chart-token"},Bt={class:"chart-value"},Nt={key:1,class:"empty-state"},jt={class:"c-cardtitlebox"},qt={style:{"min-height":"500px"},class:"contentbox js-curechartbox"},Ht={key:0,class:"chart-container loss-chart"},Ot={class:"chart-header"},Pt={class:"chart-summary"},Jt={class:"chart-range-selector"},Gt={class:"range-inputs"},Kt={class:"chart-content"},Qt={class:"chart-token"},Rt={class:"chart-value"},Xt={key:1,class:"empty-state"},Yt={__name:"index",setup(Zt){const k=f({input:"",output:""}),g=f(null),S=f(null),B=f(null),V=f("1"),y=f(null),h=f(null),b=f(null),_=f(null),R=async()=>{if(k.value.input==="")return _this.$message("请输入数据");V.value=="1"?X():V.value=="2"?Y():V.value=="3"&&Z()},X=async()=>{k.value.model_name=C.value||void 0;const s=await dl(k.value);s&&s.data&&(g.value=s.data),T("input"),T("output")},Y=async()=>{k.value.model_name=C.value||void 0;const s=await vl(k.value);s&&s.data&&(S.value=s.data),U("input",S.value),U("output",S.value)},Z=async()=>{k.value.model_name=C.value||void 0;const s=await cl(k.value);s&&s.data&&(B.value=s.data),U("input",B.value),U("output",B.value)},ll=(s,t)=>{let o=[],x=M.cloneDeep(s),c=t;return x.forEach(p=>{p&&p.indexOf(`
`)>-1?o.push(p.replace(/\n/g,c)):o.push(p)}),o};f(null),f(null);const U=(s,t)=>{let o=s==="input"?M.cloneDeep(t.origin_output_tokens):M.cloneDeep(t.output_tokens),x=s==="input"?M.cloneDeep(t.origin_loss_per_token):M.cloneDeep(t.loss_per_token);o=ll(o,"\\n");let c=Math.max(...x),p=Math.min(...x),m=x.reduce((n,w)=>n+w,0)/x.length,a=[];return o.forEach((n,w)=>{a.push({text:n&&n.replace(/\n/g,"\\n <br />"),value:x[w],maxVal:c,minVal:p,bar:x[w]/c*100})}),V.value==="2"?s==="input"?y.value={list:a,maxVal:c.toFixed(3),maxAllVal:c.toFixed(3)+.001,minAllVal:p.toFixed(3),minVal:p.toFixed(3),min:0,max:c.toFixed(3),average:m}:h.value={list:a,maxAllVal:c.toFixed(3)+.001,minAllVal:p.toFixed(3),maxVal:c.toFixed(3),minVal:p.toFixed(3),min:0,max:c.toFixed(3),average:m}:V.value==="3"&&(s==="input"?b.value={list:a,maxAllVal:c.toFixed(3)+.001,minAllVal:p.toFixed(3),maxVal:c.toFixed(3),minVal:p.toFixed(3),min:0,max:c.toFixed(3),average:m}:_.value={list:a,maxAllVal:c.toFixed(3)+.001,minAllVal:p.toFixed(3),maxVal:c.toFixed(3),minVal:p.toFixed(3),min:0,max:c.toFixed(3),average:m}),a},F=s=>{if(!s)return[];let t=M.cloneDeep(s.list),o=t.filter(a=>a.value>=s.min&&a.value<=s.max),x=[];o.forEach(a=>{x.push(a.value)});let c=Math.max(...x),p=Math.min(...x),m=x.reduce((a,n)=>a+n,0)/x.length;return s.average=m.toFixed(3),s.minVal=p.toFixed(3),s.maxVal=c.toFixed(3),console.log("filters",s),t.filter(a=>a.value>=s.min&&a.value<=s.max)},N=f([]),j=f([]),q=f(1),H=f(1),T=(s,t)=>{console.log(s,t);let o=[];al.value="",sl.value="";let x="";if(s==="input"){I.value=t,t!==void 0?(x=g.value.origin_output_tokens[I.value],o=g.value.origin_attention_scores[t]):(x="",g.value.origin_attention_scores.forEach((m,a)=>{m.forEach((n,w)=>{o[w]||(o[w]=0),o[w]+=n})})),q.value=Math.max(...o);let c=Math.min(...o),p=[];g.value.input_tokens.forEach((m,a)=>{p.push({text:m&&m.replace(/\n/g,"\\n <br />"),value:o[a],maxVal:q.value,answer:x,minVal:c,color:K(o[a],q.value)})}),N.value=p}else{L.value=t,t!==void 0?(x=g.value.output_tokens[L.value],o=g.value.attention_scores[t]):(x="",g.value.attention_scores.forEach((m,a)=>{m.forEach((n,w)=>{o[w]||(o[w]=0),o[w]+=n})})),H.value=Math.max(...o);let c=Math.min(...o),p=[];g.value.input_tokens.forEach((m,a)=>{p.push({text:m&&m.replace(/\n/g,"\\n <br />"),value:o[a],maxVal:H.value,minVal:c,answer:x,color:K(o[a],H.value)})}),j.value=p}},K=(s,t)=>`rgba(2, 169, 169,${s/t})`,I=f(void 0),L=f(void 0),tl=()=>{k.value.input="",k.value.output=""},al=f(""),sl=f(""),C=f("./big-models/"),el=f(!1);localStorage.getItem("cur_model")?C.value=localStorage.getItem("cur_model"):rl().then(s=>{s&&s.data&&s.data.model_name&&(localStorage.setItem("cur_model",s.data.model_name),C.value=s.data.model_name)});const ol=s=>{C.value=s.val,el.value=!1},nl=f('大语言模型是一种人工智能系统，它通过学习大量的文本数据来理解和生成人类语言。想象一下，它就像是一个"超级记事本"，记住了互联网上的大量文章、书籍和对话。'),il=f(`请解释一下什么是大语言模型，以及它们是如何工作的？
请用通俗易懂的语言回答，适合非技术人员理解。`),O=s=>{s&&window._this.$copy(s)},Q=s=>`注意力分数:${s.length>0?s.reduce((o,x)=>o+x,0)/s.length:0}| 点击查看问题中对应的注意力高亮`;return f(0),f(1),f(.1),f(.8),(s,t)=>{const o=D("el-button"),x=D("el-input"),c=D("el-scrollbar"),p=D("el-popover"),m=D("el-input-number");return i(),r("div",ml,[l("div",fl,[t[24]||(t[24]=l("h1",{class:"module-title"},[l("i",{class:"fas fa-brain"}),u(" 注意力分数 ")],-1)),l("div",xl,[v(pl,{val:C.value,onSubfn:ol},null,8,["val"])])]),l("div",gl,[l("div",yl,[v(o,{size:"large",onClick:t[0]||(t[0]=a=>V.value="1"),type:V.value=="1"?"primary":"info"},{default:d(()=>t[25]||(t[25]=[l("i",{class:"fas fa-chart-bar"},null,-1),u(" 注意力分数分析")])),_:1},8,["type"]),v(o,{size:"large",onClick:t[1]||(t[1]=a=>V.value="2"),type:V.value=="2"?"primary":"info"},{default:d(()=>t[26]||(t[26]=[l("i",{class:"fas fa-chart-line"},null,-1),u(" Token损失分析")])),_:1},8,["type"]),v(o,{size:"large",onClick:t[2]||(t[2]=a=>V.value="3"),type:V.value=="3"?"primary":"info"},{default:d(()=>t[27]||(t[27]=[l("i",{class:"fas fa-random"},null,-1),u(" Token熵分析")])),_:1},8,["type"])]),l("div",hl,[v(o,{onClick:tl,tabindex:"-1",type:"info"},{default:d(()=>t[28]||(t[28]=[l("i",{class:"fas fa-redo"},null,-1),u(" 重置")])),_:1}),v(o,{onClick:R,tabindex:"-1",type:"primary"},{default:d(()=>t[29]||(t[29]=[l("i",{class:"fas fa-play"},null,-1),u(" 生成分析")])),_:1})])]),l("div",bl,[l("div",_l,[l("div",kl,[t[31]||(t[31]=l("span",null,[l("i",{class:"fas fa-question-circle"}),u(" 输入内容 (问题/提示)")],-1)),v(o,{onClick:t[3]||(t[3]=a=>k.value.input=il.value),size:"small",type:"info"},{default:d(()=>t[30]||(t[30]=[l("i",{class:"fas fa-file-import"},null,-1),u(" 示例")])),_:1})]),l("div",Vl,[v(x,{modelValue:k.value.input,"onUpdate:modelValue":t[4]||(t[4]=a=>k.value.input=a),style:{width:"100%"},rows:14,type:"textarea",placeholder:""},null,8,["modelValue"])])]),l("div",wl,[l("div",Fl,[t[33]||(t[33]=l("span",null,[l("i",{class:"fas fa-bullseye"}),u(" 目标输出 (期望答案)")],-1)),v(o,{onClick:t[5]||(t[5]=a=>k.value.output=nl.value),size:"small",type:"info"},{default:d(()=>t[32]||(t[32]=[l("i",{class:"fas fa-file-import"},null,-1),u(" 示例")])),_:1})]),l("div",zl,[v(x,{modelValue:k.value.output,"onUpdate:modelValue":t[6]||(t[6]=a=>k.value.output=a),style:{width:"100%"},rows:14,type:"textarea",placeholder:""},null,8,["modelValue"])])])]),P(l("div",Al,[t[42]||(t[42]=G('<div class="titlebox" data-v-a039c191><div class="tl" data-v-a039c191>注意力分数对比分析 <div style="font-size:0.75rem;color:#6b7280;margin-top:0.5rem;font-weight:normal;" data-v-a039c191><i class="fas fa-info-circle" data-v-a039c191></i><strong style="font-weight:bold;" data-v-a039c191>使用步骤：</strong>1️⃣ 先点击左右两侧答案中的token（或All按钮）查看注意力高亮；2️⃣ 再点击对应下方高亮的问题token查看详细分数。<br data-v-a039c191><small style="color:#6b7280;margin-top:4px;display:block;" data-v-a039c191><i class="fas fa-lightbulb" data-v-a039c191></i> 提示：左右两侧独立操作，互不影响。分数显示在对应区域下方。</small></div></div></div>',1)),l("div",Cl,[l("div",Tl,[l("div",$l,[l("div",El,[t[34]||(t[34]=l("span",null,[l("i",{class:"fas fa-robot"}),l("span",null,"模型生成答案")],-1)),v(o,{size:"small",type:"info"},{default:d(()=>[l("i",{onClick:t[7]||(t[7]=a=>O(g.value.origin_output_tokens)),title:"复制完整答案",class:"fas fa-copy"})]),_:1})]),l("div",Ml,[g.value&&g.value.origin_output_tokens?(i(),r("div",Dl,[v(c,null,{default:d(()=>[l("div",Sl,[l("div",{title:"查看所有token的平均注意力分布",class:W(["item all",{on:I.value===void 0}]),onClick:t[8]||(t[8]=a=>T("input",void 0))}," All ",2),(i(!0),r(z,null,A(g.value.origin_output_tokens,(a,n)=>(i(),r("div",{class:W(["item",{on:I.value===n}]),title:Q(g.value.origin_attention_scores[n],"1"),onClick:w=>T("input",n),key:n},e(a),11,Ul))),128))])]),_:1})])):(i(),r("div",Il,t[35]||(t[35]=[l("i",{class:"fas fa-robot"},null,-1),l("p",null,"模型生成的答案将在这里显示",-1)])))])]),l("div",Ll,[t[37]||(t[37]=l("div",{class:"titlebox nobg"},[l("span",null,[l("i",{class:"fas fa-bullseye"}),l("span",null,"目标期望答案")])],-1)),l("div",Wl,[g.value&&g.value.output_tokens?(i(),r("div",Bl,[v(c,null,{default:d(()=>[l("div",Nl,[l("div",{title:"查看所有token的平均注意力分布",class:W(["item all",{on:L.value===void 0}]),onClick:t[9]||(t[9]=a=>T("output",void 0))}," All ",2),(i(!0),r(z,null,A(g.value.output_tokens,(a,n)=>(i(),r("div",{class:W(["item",{on:L.value===n}]),title:Q(g.value.attention_scores[n],"2"),onClick:w=>T("output",n),key:n},e(a),11,jl))),128))])]),_:1})])):(i(),r("div",ql,t[36]||(t[36]=[l("i",{class:"fas fa-bullseye"},null,-1),l("p",null,"目标期望答案将在这里显示",-1)])))])])]),l("div",Hl,[l("div",Ol,[t[39]||(t[39]=l("div",{class:"titlebox nobg"},[l("span",{style:{"font-size":"0.85em",color:"#6b7280"}},"原始问题/提示 - 注意力高亮 (模型答案)")],-1)),l("div",Pl,[N.value.length>0?(i(),r("div",Jl,[(i(!0),r(z,null,A(N.value,(a,n)=>(i(),$(p,{key:n,"show-after":500,placement:"top","popper-style":{width:"auto",padding:"10px",minWidth:"80px"},trigger:"hover"},{reference:d(()=>[(i(),r("span",{class:"item",style:E("background-color:"+a.color),key:n,innerHTML:a.text},null,12,Gl))]),default:d(()=>[l("div",null,"注意力分数: "+e(a.value.toFixed(4))+" (范围: "+e(a.minVal.toFixed(4))+"-"+e(a.maxVal.toFixed(4))+") "+e(a.answer?"|对应模型答案token: "+a.answer:""),1)]),_:2},1024))),128))])):(i(),r("div",Kl,t[38]||(t[38]=[l("i",{class:"fas fa-question-circle"},null,-1),l("p",null,"点击上方模型答案的token查看注意力分数",-1)])))])]),l("div",Ql,[t[41]||(t[41]=l("div",{class:"titlebox nobg"},[l("span",{style:{"font-size":"0.85em",color:"#6b7280"}},"原始问题/提示 - 注意力高亮 (目标答案)")],-1)),l("div",Rl,[j.value.length>0?(i(),r("div",Xl,[(i(!0),r(z,null,A(j.value,(a,n)=>(i(),$(p,{key:n,"show-after":500,placement:"top","popper-style":{width:"auto",padding:"10px",minWidth:"80px"},trigger:"hover"},{reference:d(()=>[(i(),r("span",{class:"item",style:E("background-color:"+a.color),key:n,innerHTML:a.text},null,12,Yl))]),default:d(()=>[l("div",null,"注意力分数: "+e(a.value.toFixed(4))+" (范围: "+e(a.minVal.toFixed(4))+"-"+e(a.maxVal.toFixed(4))+") "+e(a.answer?"| 对应模型答案token: "+a.answer:""),1)]),_:2},1024))),128))])):(i(),r("div",Zl,t[40]||(t[40]=[l("i",{class:"fas fa-question-circle"},null,-1),l("p",null,"点击上方目标答案的token查看注意力分数",-1)])))])])])])],512),[[J,V.value=="1"]]),P(l("div",lt,[t[63]||(t[63]=G('<div class="titlebox" data-v-a039c191><div class="tl" data-v-a039c191><span style="color:rgb(220, 38, 38);" data-v-a039c191>Token损失分析对比</span><div style="font-size:0.75rem;color:#6b7280;margin-top:0.5rem;font-weight:normal;" data-v-a039c191><i class="fas fa-exclamation-triangle" style="color:#dc2626;" data-v-a039c191></i> 对比模型答案和目标答案的Token损失分布，损失值越高表示预测难度越大 </div></div></div>',1)),l("div",tt,[l("div",at,[l("div",st,[l("div",et,[t[43]||(t[43]=l("span",null,[l("i",{class:"fas fa-robot"}),l("span",null,"模型生成答案")],-1)),v(o,{size:"small",type:"info"},{default:d(()=>[l("i",{onClick:t[10]||(t[10]=a=>O(g.value.origin_output_tokens)),title:"复制完整答案",class:"fas fa-copy"})]),_:1})]),l("div",ot,[y.value?(i(),r("div",nt,[l("div",it,[t[48]||(t[48]=l("div",{class:"chart-title"},[l("i",{class:"fas fa-chart-bar"}),u(" 损失值分析 (模型答案) ")],-1)),l("div",ut,[l("span",null,[t[44]||(t[44]=l("i",{class:"fas fa-list"},null,-1)),u(" "+e(F(y.value).length)+"个token (损失值: "+e(y.value.min)+"-"+e(y.value.max)+")",1)]),l("span",null,[t[45]||(t[45]=l("i",{class:"fas fa-arrow-up"},null,-1)),u(" 最大: "+e(y.value.maxVal),1)]),l("span",null,[t[46]||(t[46]=l("i",{class:"fas fa-arrow-down"},null,-1)),u(" 最小: "+e(y.value.minVal),1)]),l("span",null,[t[47]||(t[47]=l("i",{class:"fas fa-calculator"},null,-1)),u(" 平均: "+e(y.value.average),1)])])]),l("div",rt,[t[51]||(t[51]=l("div",{class:"range-selector-label"},[l("i",{class:"fas fa-filter"}),u(" 损失值范围: ")],-1)),l("div",dt,[v(m,{"controls-position":"right",style:{width:"100px"},modelValue:y.value.min,"onUpdate:modelValue":t[11]||(t[11]=a=>y.value.min=a),placeholder:"",size:"small",min:0,max:y.value.maxAllVal,step:.001},null,8,["modelValue","max"]),t[50]||(t[50]=l("span",{style:{margin:"0 10px"},class:"range-separator"},"-",-1)),v(m,{"controls-position":"right",style:{width:"100px"},modelValue:y.value.max,"onUpdate:modelValue":t[12]||(t[12]=a=>y.value.max=a),placeholder:"",size:"small",min:0,max:y.value.maxAllVal,step:.001},null,8,["modelValue","max"]),v(o,{onClick:t[13]||(t[13]=a=>{y.value.min=0,y.value.max=y.value.maxAllVal}),style:{"margin-left":"10px"},type:"info",size:"small"},{default:d(()=>t[49]||(t[49]=[l("i",{class:"fas fa-refresh"},null,-1),u(" 重置")])),_:1})])]),v(c,{"max-height":"500"},{default:d(()=>[l("div",vt,[(i(!0),r(z,null,A(F(y.value),(a,n)=>(i(),$(p,{effect:"dark",key:n,"show-after":200,placement:"top","popper-style":{width:"auto",padding:"10px",minWidth:"80px"},trigger:"hover"},{reference:d(()=>[(i(),r("div",{key:n,class:"chart-item"},[l("div",ct,e(a.text),1),l("div",{class:"chart-bar loss-very-high",style:E("width: "+a.bar+"%")},null,4),l("div",pt,e(a.value.toFixed(3)),1)]))]),default:d(()=>[l("div",null,"损失值："+e(a.text)+"（Token："+e(a.value)+"）",1)]),_:2},1024))),128))])]),_:1})])):(i(),r("div",mt,t[52]||(t[52]=[l("i",{class:"fas fa-chart-bar"},null,-1),l("p",null,"模型答案柱状图将在这里显示",-1)])))])]),l("div",ft,[t[62]||(t[62]=l("div",{class:"titlebox nobg"},[l("span",null,[l("i",{class:"fas fa-bullseye"}),l("span",null,"目标期望答案")])],-1)),l("div",xt,[h.value?(i(),r("div",gt,[l("div",yt,[t[57]||(t[57]=l("div",{class:"chart-title"},[l("i",{class:"fas fa-chart-bar"}),u(" 损失值分析 (目标答案) ")],-1)),l("div",ht,[l("span",null,[t[53]||(t[53]=l("i",{class:"fas fa-list"},null,-1)),u(" "+e(F(h.value).length)+"个token (损失值: "+e(h.value.min)+"-"+e(h.value.max)+")",1)]),l("span",null,[t[54]||(t[54]=l("i",{class:"fas fa-arrow-up"},null,-1)),u(" 最大: "+e(h.value.maxVal),1)]),l("span",null,[t[55]||(t[55]=l("i",{class:"fas fa-arrow-down"},null,-1)),u(" 最小: "+e(h.value.minVal),1)]),l("span",null,[t[56]||(t[56]=l("i",{class:"fas fa-calculator"},null,-1)),u(" 平均: "+e(h.value.average),1)])])]),l("div",bt,[t[60]||(t[60]=l("div",{class:"range-selector-label"},[l("i",{class:"fas fa-filter"}),u(" 损失值范围: ")],-1)),l("div",_t,[v(m,{"controls-position":"right",style:{width:"100px"},modelValue:h.value.min,"onUpdate:modelValue":t[14]||(t[14]=a=>h.value.min=a),placeholder:"",size:"small",min:0,max:h.value.maxAllVal,step:.001},null,8,["modelValue","max"]),t[59]||(t[59]=l("span",{style:{margin:"0 10px"},class:"range-separator"},"-",-1)),v(m,{"controls-position":"right",style:{width:"100px"},modelValue:h.value.max,"onUpdate:modelValue":t[15]||(t[15]=a=>h.value.max=a),placeholder:"",size:"small",min:0,max:h.value.maxAllVal,step:.001},null,8,["modelValue","max"]),v(o,{onClick:t[16]||(t[16]=a=>{h.value.min=0,h.value.max=h.value.maxAllVal}),style:{"margin-left":"10px"},type:"info",size:"small"},{default:d(()=>t[58]||(t[58]=[l("i",{class:"fas fa-refresh"},null,-1),u(" 重置")])),_:1})])]),v(c,{"max-height":"500"},{default:d(()=>[l("div",kt,[(i(!0),r(z,null,A(F(h.value),(a,n)=>(i(),$(p,{effect:"dark",key:n,"show-after":200,placement:"top","popper-style":{width:"auto",padding:"10px",minWidth:"80px"},trigger:"hover"},{reference:d(()=>[(i(),r("div",{key:n,class:"chart-item"},[l("div",Vt,e(a.text),1),l("div",{class:"chart-bar loss-very-high",style:E("width: "+a.bar+"%")},null,4),l("div",wt,e(a.value.toFixed(3)),1)]))]),default:d(()=>[l("div",null,"损失值："+e(a.text)+"（Token："+e(a.value)+"）",1)]),_:2},1024))),128))])]),_:1})])):(i(),r("div",Ft,t[61]||(t[61]=[l("i",{class:"fas fa-chart-bar"},null,-1),l("p",null,"模型答案柱状图将在这里显示",-1)])))])])])])],512),[[J,V.value=="2"]]),P(l("div",zt,[t[84]||(t[84]=G('<div class="titlebox" data-v-a039c191><div class="tl" data-v-a039c191><span style="color:rgb(37, 99, 235);" data-v-a039c191>Token熵分析对比</span><div style="font-size:0.75rem;color:#6b7280;margin-top:0.5rem;font-weight:normal;" data-v-a039c191><i class="fas fa-chart-area" style="color:#2563eb;" data-v-a039c191></i> 对比模型答案和目标答案的Token熵分布，熵值越高表示选择不确定性越大 </div></div></div>',1)),l("div",At,[l("div",Ct,[l("div",Tt,[l("div",$t,[t[64]||(t[64]=l("span",null,[l("i",{class:"fas fa-robot"}),l("span",null,"模型生成答案")],-1)),v(o,{size:"small",type:"info"},{default:d(()=>[l("i",{onClick:t[17]||(t[17]=a=>O(S.value.origin_output_tokens)),title:"复制完整答案",class:"fas fa-copy"})]),_:1})]),l("div",Et,[b.value?(i(),r("div",Mt,[l("div",Dt,[t[69]||(t[69]=l("div",{class:"chart-title"},[l("i",{class:"fas fa-chart-bar"}),u(" 熵值分析 (模型答案) ")],-1)),l("div",St,[l("span",null,[t[65]||(t[65]=l("i",{class:"fas fa-list"},null,-1)),u(" "+e(F(b.value).length)+"个token (损失值: "+e(b.value.min)+"-"+e(b.value.max)+")",1)]),l("span",null,[t[66]||(t[66]=l("i",{class:"fas fa-arrow-up"},null,-1)),u(" 最大: "+e(b.value.maxVal),1)]),l("span",null,[t[67]||(t[67]=l("i",{class:"fas fa-arrow-down"},null,-1)),u(" 最小: "+e(b.value.minVal),1)]),l("span",null,[t[68]||(t[68]=l("i",{class:"fas fa-calculator"},null,-1)),u(" 平均: "+e(b.value.average),1)])])]),l("div",Ut,[t[72]||(t[72]=l("div",{class:"range-selector-label"},[l("i",{class:"fas fa-filter"}),u(" 熵值范围: ")],-1)),l("div",It,[v(m,{"controls-position":"right",style:{width:"100px"},modelValue:b.value.min,"onUpdate:modelValue":t[18]||(t[18]=a=>b.value.min=a),placeholder:"",size:"small",min:0,max:b.value.maxAllVal,step:.001},null,8,["modelValue","max"]),t[71]||(t[71]=l("span",{style:{margin:"0 10px"},class:"range-separator"},"-",-1)),v(m,{"controls-position":"right",style:{width:"100px"},modelValue:b.value.max,"onUpdate:modelValue":t[19]||(t[19]=a=>b.value.max=a),placeholder:"",size:"small",min:0,max:b.value.maxAllVal,step:.001},null,8,["modelValue","max"]),v(o,{onClick:t[20]||(t[20]=a=>{b.value.min=0,b.value.max=b.value.maxAllVal}),style:{"margin-left":"10px"},type:"info",size:"small"},{default:d(()=>t[70]||(t[70]=[l("i",{class:"fas fa-refresh"},null,-1),u(" 重置")])),_:1})])]),v(c,{"max-height":"500"},{default:d(()=>[l("div",Lt,[(i(!0),r(z,null,A(F(b.value),(a,n)=>(i(),$(p,{effect:"dark",key:n,"show-after":200,placement:"top","popper-style":{width:"auto",padding:"10px",minWidth:"80px"},trigger:"hover"},{reference:d(()=>[(i(),r("div",{key:n,class:"chart-item"},[l("div",Wt,e(a.text),1),l("div",{class:"chart-bar loss-very-high",style:E("width: "+a.bar+"%")},null,4),l("div",Bt,e(a.value.toFixed(3)),1)]))]),default:d(()=>[l("div",null,"熵值："+e(a.text)+"（Token："+e(a.value)+"）",1)]),_:2},1024))),128))])]),_:1})])):(i(),r("div",Nt,t[73]||(t[73]=[l("i",{class:"fas fa-chart-bar"},null,-1),l("p",null,"模型答案柱状图将在这里显示",-1)])))])]),l("div",jt,[t[83]||(t[83]=l("div",{class:"titlebox nobg"},[l("span",null,[l("i",{class:"fas fa-bullseye"}),l("span",null,"目标期望答案")])],-1)),l("div",qt,[_.value?(i(),r("div",Ht,[l("div",Ot,[t[78]||(t[78]=l("div",{class:"chart-title"},[l("i",{class:"fas fa-chart-bar"}),u(" 熵值分析 (目标答案) ")],-1)),l("div",Pt,[l("span",null,[t[74]||(t[74]=l("i",{class:"fas fa-list"},null,-1)),u(" "+e(F(_.value).length)+"个token (损失值: "+e(_.value.min)+"-"+e(_.value.max)+")",1)]),l("span",null,[t[75]||(t[75]=l("i",{class:"fas fa-arrow-up"},null,-1)),u(" 最大: "+e(_.value.maxVal),1)]),l("span",null,[t[76]||(t[76]=l("i",{class:"fas fa-arrow-down"},null,-1)),u(" 最小: "+e(_.value.minVal),1)]),l("span",null,[t[77]||(t[77]=l("i",{class:"fas fa-calculator"},null,-1)),u(" 平均: "+e(_.value.average),1)])])]),l("div",Jt,[t[81]||(t[81]=l("div",{class:"range-selector-label"},[l("i",{class:"fas fa-filter"}),u(" 熵值范围: ")],-1)),l("div",Gt,[v(m,{"controls-position":"right",style:{width:"100px"},modelValue:_.value.min,"onUpdate:modelValue":t[21]||(t[21]=a=>_.value.min=a),placeholder:"",size:"small",min:0,max:_.value.maxAllVal,step:.001},null,8,["modelValue","max"]),t[80]||(t[80]=l("span",{style:{margin:"0 10px"},class:"range-separator"},"-",-1)),v(m,{"controls-position":"right",style:{width:"100px"},modelValue:_.value.max,"onUpdate:modelValue":t[22]||(t[22]=a=>_.value.max=a),placeholder:"",size:"small",min:0,max:_.value.maxAllVal,step:.001},null,8,["modelValue","max"]),v(o,{onClick:t[23]||(t[23]=a=>{_.value.min=0,_.value.max=_.value.maxAllVal}),style:{"margin-left":"10px"},type:"info",size:"small"},{default:d(()=>t[79]||(t[79]=[l("i",{class:"fas fa-refresh"},null,-1),u(" 重置")])),_:1})])]),v(c,{"max-height":"500"},{default:d(()=>[l("div",Kt,[(i(!0),r(z,null,A(F(_.value),(a,n)=>(i(),$(p,{effect:"dark",key:n,"show-after":200,placement:"top","popper-style":{width:"auto",padding:"10px",minWidth:"80px"},trigger:"hover"},{reference:d(()=>[(i(),r("div",{key:n,class:"chart-item"},[l("div",Qt,e(a.text),1),l("div",{class:"chart-bar loss-very-high",style:E("width: "+a.bar+"%")},null,4),l("div",Rt,e(a.value.toFixed(3)),1)]))]),default:d(()=>[l("div",null,"熵值："+e(a.text)+"（Token："+e(a.value)+"）",1)]),_:2},1024))),128))])]),_:1})])):(i(),r("div",Xt,t[82]||(t[82]=[l("i",{class:"fas fa-chart-bar"},null,-1),l("p",null,"模型答案柱状图将在这里显示",-1)])))])])])])],512),[[J,V.value=="3"]]),t[85]||(t[85]=l("br",null,null,-1))])}}},oa=ul(Yt,[["__scopeId","data-v-a039c191"]]);export{oa as default};
